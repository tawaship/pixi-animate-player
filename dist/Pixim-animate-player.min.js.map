{"version":3,"file":"Pixim-animate-player.min.js","sources":["../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/pixim/Player.ts","../src/common/global.ts","../src/common/core.ts"],"sourcesContent":["/*!\n * @tawaship/pixi-animate-core.js - v1.0.5\n * \n * @require pixi.js v5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport { Container, Sprite, BaseTexture, Texture, Graphics, LINE_CAP, LINE_JOIN, Text } from 'pixi.js';\n\n/**\r\n * @private\r\n */\r\nfunction createOriginParams() {\r\n    return {\r\n        x: 0,\r\n        y: 0,\r\n        scaleX: 0,\r\n        scaleY: 0,\r\n        regx: 0,\r\n        regy: 0,\r\n        skewX: 0,\r\n        skewY: 0,\r\n        rotation: 0,\r\n        visible: true,\r\n        alpha: 1,\r\n        _off: false,\r\n        mask: null,\r\n        filters: null\r\n    };\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction createPixiData(regObj) {\r\n    return {\r\n        regObj,\r\n        events: {}\r\n    };\r\n}\r\nfunction updateDisplayObjectChildren(self, e) {\r\n    const list = self.children.slice();\r\n    for (let i = 0, l = list.length; i < l; i++) {\r\n        const child = list[i];\r\n        if (!child.isVisible()) {\r\n            continue;\r\n        }\r\n        //child.draw();\r\n        child.updateForPixi(e);\r\n    }\r\n    return true;\r\n}\n\nclass CreatejsStageGL extends window.createjs.StageGL {\r\n\tupdateForPixi(props) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t}\r\n}\n\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD$1 = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD$1;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD$1;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD$1;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn window.createjs.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn window.createjs.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = window.createjs.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn window.createjs.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new PIXI.filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new PIXI.Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new PIXI.Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction appendDisplayObjectDescriptor(cls) {\r\n\tObject.defineProperties(cls.prototype, appendixDescriptor);\r\n}\n\n/**\r\n * @ignore\r\n */\r\nclass PixiMovieClip extends Container {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createMovieClipPixiData(cjs) {\r\n\tconst pixi = new PixiMovieClip(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi,\r\n\t\tsubInstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsMovieClip extends window.createjs.MovieClip {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createMovieClipPixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createMovieClipPixiData(this);\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\taddChild(child) {\r\n\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child, index) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child) {\r\n\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e) {\r\n\t\tthis._updateState();\r\n\t\t\r\n\t\treturn updateDisplayObjectChildren(this, e);\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsMovieClip);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiSprite extends Sprite {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createSpritePixiData(cjs) {\r\n\tconst pixi = new PixiSprite(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.anchor), {\r\n\t\tinstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsSprite extends window.createjs.Sprite {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createSpritePixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createSpritePixiData(this);\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\tgotoAndStop() {\r\n\t\tsuper.gotoAndStop(...arguments);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsSprite);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiShape extends Container {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createShapePixiData(cjs) {\r\n\tconst pixi = new PixiShape(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi,\r\n\t\tmasked: []\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsShape extends window.createjs.Shape {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createShapePixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t}\r\n\t\t\r\n\t\tthis._graphics = value;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsShape);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiGraphics extends Graphics {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createGraphicsPixiData(cjs) {\r\n\tconst pixi = new PixiGraphics(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi,\r\n\t\tstrokeFill: 0,\r\n\t\tstrokeAlpha: 1\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_CAP.BUTT,\r\n\t1: LINE_CAP.ROUND,\r\n\t2: LINE_CAP.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsGraphics extends window.createjs.Graphics {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createGraphicsPixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t}\r\n\t\r\n\tmoveTo(x, y) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x, y) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTon(x1, y1, x2, y2, radius) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx, cpy, x, y) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tconst colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n\t\tres.alpha = Number(colors[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis._pixiData.instance.lineTextureStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n\t\t\tmiterLimit: miterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x, y, w, h, radius) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x, y, radius) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsGraphics);\r\n\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: CreatejsGraphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: CreatejsGraphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: CreatejsGraphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: CreatejsGraphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: CreatejsGraphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: CreatejsGraphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: CreatejsGraphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: CreatejsGraphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: CreatejsGraphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: CreatejsGraphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: CreatejsGraphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: CreatejsGraphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: CreatejsGraphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: CreatejsGraphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: CreatejsGraphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawPolyStar\r\n\t}\r\n});\n\n/**\r\n * @ignore\r\n */\r\nclass PixiText extends Text {\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass PixiTextContainer extends Container {\r\n\tconstructor(cjs, text) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t\tthis._text = text;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._text;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createTextOriginParam(text, font, color) {\r\n\treturn Object.assign(createOriginParams(), {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: 'left',\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createTextPixiData(cjs, text) {\r\n\tconst pixi = new PixiTextContainer(cjs, text);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsText extends window.createjs.Text {\r\n\tconstructor(text, font, color) {\r\n\t\tthis._originParams = createTextOriginParam(text, font, color);\r\n\t\t\r\n\t\tconst _font = this._parseFont(font);\r\n\t\t\r\n\t\tconst t = new PixiText(text, {\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._pixiData = createTextPixiData(this, t);\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._originParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._originParams.text = text;\r\n\t}\r\n\t\r\n\t_parseFont(font) {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontSize: Number((p.shift() || '0px').replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._originParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\tthis._originParams.font = font;\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._originParams.color;\r\n\t}\r\n\t\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\tthis._originParams.color = color;\r\n\t}\r\n\t\r\n\t_align(align) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._originParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\tthis._originParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._originParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.style.lineHeight = height;\r\n\t\t\r\n\t\tthis._originParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._originParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.style.wordWrapWidth = width;\r\n\t\t\r\n\t\tthis._originParams.lineWidth = width;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsText);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiButtonHelper extends Container {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createButtonHelperPixiData(cjs) {\r\n\tconst pixi = new PixiButtonHelper(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsButtonHelper extends window.createjs.ButtonHelper {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createButtonHelperPixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t\t\r\n\t\tconst createjs = arguments[0];\r\n\t\tconst pixi = createjs._pixiData.instance;\r\n\t\t\r\n\t\tconst baseFrame = arguments[1];\r\n\t\tconst overFrame = arguments[2];\r\n\t\tconst downFrame = arguments[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = arguments[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsButtonHelper);\n\n/**\r\n * Prepare createjs content published with Adobe Animate.\r\n * @param id \"lib.properties.id\" in Animate content.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction prepareAnimateAsync(id, basepath, options = {}) {\r\n    const comp = window.AdobeAn.getComposition(id);\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    if (!options.useSynchedTimeline) {\r\n        Object.defineProperties(window.createjs.MovieClip.prototype, {\r\n            updateForPixi: {\r\n                value: function (e) {\r\n                    return this._tick(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        const loader = new window.createjs.LoadQueue(false);\r\n        loader.installPlugin(window.createjs.Sound);\r\n        loader.addEventListener('fileload', function (evt) {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', function (evt) {\r\n            resolve(evt);\r\n        });\r\n        if (basepath) {\r\n            basepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n            const m = lib.properties.manifest;\r\n            for (let i = 0; i < m.length; i++) {\r\n                m[i].src = basepath + m[i].src;\r\n            }\r\n        }\r\n        loader.loadManifest(lib.properties.manifest);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\nfunction initializeAnimate(obj = {}) {\r\n    window.createjs.StageGL = CreatejsStageGL;\r\n    window.createjs.MovieClip = CreatejsMovieClip;\r\n    window.createjs.Sprite = CreatejsSprite;\r\n    window.createjs.Shape = CreatejsShape;\r\n    //window.createjs.Bitmap = createjs.CreatejsBitmap;\r\n    window.createjs.Graphics = CreatejsGraphics;\r\n    window.createjs.Text = CreatejsText;\r\n    window.createjs.ButtonHelper = CreatejsButtonHelper;\r\n    for (let i in obj) {\r\n        window.createjs[i] = obj[i];\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { CreatejsButtonHelper, CreatejsGraphics, CreatejsMovieClip, CreatejsShape, CreatejsSprite, CreatejsStageGL, CreatejsText, PixiButtonHelper, PixiGraphics, PixiMovieClip, PixiShape, PixiSprite, PixiText, PixiTextContainer, initializeAnimate, prepareAnimateAsync, updateDisplayObjectChildren };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import { prepareAnimateAsync, TAnimateLibrary, TPlayerOption } from '@tawaship/pixi-animate-core';\r\nimport { initStage } from '../common/core';\r\nimport * as _Pixim from '@tawaship/pixim.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace Pixim {\r\n\texport namespace animate {\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player extends _Pixim.Application {\r\n\t\t\tprivate _id: string;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @param id \"lib.properties.id\" in Animate content.\r\n\t\t\t * @param rootName Root class name of Animate content.\r\n\t\t\t * @param basepath Directory path of Animate content.\r\n\t\t\t * @param pixiOptions Options of PIXI.Application.\r\n\t\t\t * @param piximOptions Options of Pixim.Application.\r\n\t\t\t */\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}, piximOptions: _Pixim.TApplicationOption = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib: TAnimateLibrary = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tsuper(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}), piximOptions);\r\n\t\t\t\t\r\n\t\t\t\tthis.app.render();\r\n\t\t\t\t\r\n\t\t\t\tthis._id = id;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleTick.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Prepare createjs content published with Adobe Animate.\r\n\t\t\t * @async\r\n\t\t\t */\r\n\t\t\tprepareAsync(options: TPlayerOption = {}) {\r\n\t\t\t\treturn prepareAnimateAsync(this._id, this._basepath, options)\r\n\t\t\t\t\t.then((lib: TAnimateLibrary) => {\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tinitStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst Content = _Pixim.Content.create();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tContent.defineLibraries({\r\n\t\t\t\t\t\t\troot: class Root extends _Pixim.Container {\r\n\t\t\t\t\t\t\t\tconstructor($: any) {\r\n\t\t\t\t\t\t\t\t\tsuper();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.addChild($.vars.root);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst content = new Content();\r\n\t\t\t\t\t\tcontent.addVars({\r\n\t\t\t\t\t\t\troot: exportRoot.pixi\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn this.attachAsync(content)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\treturn lib;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\twindow.createjs.Ticker.removeEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleTick(e) {\r\n\t\t\t\tthis._stage.updateForPixi(e);\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = Pixim.animate.Player;","import { initializeAnimate } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\ninitializeAnimate();\r\n\r\nfunction playSound(id: string, loop: boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","import * as PIXI from 'pixi.js';\r\nimport { TPlayerOption } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage: any, options: TPlayerOption = {}) {\r\n\tif (!options.useSynchedTimeline) {\r\n\t\tObject.defineProperties(window.createjs.StageGL.prototype, {\r\n\t\t\tupdateForPixi: {\r\n\t\t\t\tvalue: function(e) {\r\n\t\t\t\t\tthis._tick(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}"],"names":["createPixiData","regObj","events","updateDisplayObjectChildren","self","e","const","list","children","slice","i","l","length","child","isVisible","updateForPixi","CreatejsStageGL","props","this","tickOnUpdate","tick","dispatchEvent","window","createjs","StageGL","_isDown","EventMap","mousedown","types","factory","cb","currentTarget","target","ev","data","rawX","global","x","rawY","y","rollover","rollout","pressmove","pressup","DEG_TO_RAD$1","Math","PI","appendixDescriptor","get","_originParams","set","value","_pixiData","instance","scaleX","scale","scaleY","skewX","skew","skewY","regX","regY","rotation","visible","alpha","_off","renderable","addEventListener","type","Function","func","t","push","origin","on","interactive","DisplayObject","prototype","apply","arguments","removeEventListener","j","off","splice","res","listeners","_listeners","let","removeAllEventListeners","removeAllListeners","_pixi","mask","masked","once","parent","addChild","filters","subInstance","f","ColorMatrixFilter","m","PIXI","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","Container","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","appendDisplayObjectDescriptor","cls","Object","defineProperties","PixiMovieClip","cjs","super","_createjs","prototypeAccessors","createMovieClipPixiData","pixi","assign","pivot","CreatejsMovieClip","regx","regy","initialize","addChildAt","index","removeChild","removeChildAt","removeAllChldren","prototypeAccessors$1","_updateState","MovieClip","PixiSprite","prototypeAccessors$2","Sprite","createSpritePixiData","anchor","CreatejsSprite","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","prototypeAccessors$3","PixiShape","prototypeAccessors$4","createShapePixiData","CreatejsShape","prototypeAccessors$5","graphics","_graphics","Shape","PixiGraphics","prototypeAccessors$6","Graphics","createGraphicsPixiData","strokeFill","strokeAlpha","LineCap","0","LINE_CAP","BUTT","1","ROUND","2","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","CreatejsGraphics","beginFill","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTon","x1","y1","x2","y2","radius","arcTo","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","clear","_parseColor","color","charAt","parseInt","colors","replace","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","DEG_TO_RAD","prototypeAccessors$7","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","ss","s","dr","rr","dc","de","dp","PixiText","Text","PixiTextContainer","text","_text","prototypeAccessors$8","createTextOriginParam","font","textAlign","lineHeight","lineWidth","createTextPixiData","CreatejsText","_font","_parseFont","fontSize","fontFamily","fill","wordWrap","prototypeAccessors$9","_align","p","shift","style","align","height","wordWrapWidth","PixiButtonHelper","prototypeAccessors$10","createButtonHelperPixiData","Pixim","CreatejsButtonHelper","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","prototypeAccessors$11","ButtonHelper","obj","initializeAnimate","playSound","id","loop","Sound","play","interrupt","INTERRUPT_EARLY","animate","Player","rootName","basepath","pixiOptions","piximOptions","comp","AdobeAn","getComposition","Error","lib","getLibrary","root","prop","properties","backgroundColor","app","render","_id","_rootClass","_basepath","Ticker","framerate","fps","_handleTick","bind","prepareAsync","options","useSynchedTimeline","_tick","Promise","resolve","reject","manifest","loader","LoadQueue","installPlugin","evt","images","getImages","item","result","handleFileLoad","src","loadManifest","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","prepareAnimateAsync","exportRoot","_stage","Stage","stage","initStage","compositionLoaded","Content","_Pixim.Content","create","defineLibraries","$","vars","content","addVars","attachAsync","stop","_Pixim.Application"],"mappings":"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"}