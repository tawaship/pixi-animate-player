/*!
 * @tawaship/pixi-createjs-player.js - v1.0.0
 * 
 * @require pixi.js v5.3.3
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
this.PIXI=this.PIXI||{},function(t,e){"use strict";function i(t,e){return new Promise((function(i,a){var r=e.getLibrary();0===r.properties.manifest.length&&i({evt:{},comp:e});var n=new createjs.LoadQueue(!1);if(n.installPlugin(createjs.Sound),n.addEventListener("fileload",(function(t){!function(t,e){var i=e.getImages();t&&"image"==t.item.type&&(i[t.item.id]=t.result)}(t,e)})),n.addEventListener("complete",(function(t){i({evt:t,comp:e})})),t){t=(t+"/").replace(/\/\//g,"/");for(var s=r.properties.manifest,o=0;o<s.length;o++)s[o].src=t+s[o].src}n.loadManifest(r.properties.manifest)})).then((function(t){for(var e=t.evt,i=t.comp,a=i.getLibrary(),r=i.getSpriteSheet(),n=e.target,s=a.ssMetadata,o=0;o<s.length;o++)r[s[o].name]=new window.createjs.SpriteSheet({images:[n.getResult(s[o].name)],frames:s[o].frames})}))}function a(t,e){if((e=e||{}).useSynchedTimeline){function i(){for(var t=this.children.slice(),e=0,i=t.length;e<i;e++){var a=t[e];a.isVisible()&&a.draw()}return!0}Object.defineProperties(createjs.MovieClip.prototype,{draw:{value:function(){return this._updateState(),this._containerDraw()}},_containerDraw:{value:i}});var a={draw:{value:function(){return!0}}};Object.defineProperties(createjs.Sprite.prototype,a),Object.defineProperties(createjs.Graphics.prototype,a),Object.defineProperties(createjs.Shape.prototype,a),Object.defineProperties(createjs.Text.prototype,a),Object.defineProperties(createjs.Bitmap.prototype,a),t.update=function(t){this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),-1==this._autoPurge||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):this.draw(),this.dispatchEvent("drawend")},t.draw=i,t._updateFunction=t.update}else t._updateFunction=t.tick;t._handleTick?t._tickFunction=function(e){t._updateFunction(),t._handleTick()}:t._tickFunction=function(e){t._updateFunction()}}Object.defineProperties(window,{playSound:{value:function(t,e){return void 0===e&&(e=!1),window.createjs.Sound.play(t,{interrupt:window.createjs.Sound.INTERRUPT_EARLY,loop:e})}}});var r={DisplayObject:createjs.DisplayObject,MovieClip:createjs.MovieClip,Sprite:createjs.Sprite,Container:createjs.Container,Text:createjs.Text,Shape:createjs.Shape,Graphics:createjs.Graphics,ButtonHelper:createjs.ButtonHelper};function n(t,e){t._originParams={x:0,y:0,scaleX:0,scaleY:0,regx:0,regy:0,skewX:0,skewY:0,rotation:0,visible:!0,alpha:1,_off:!1,mask:null,filters:null},e._createjs=t,t._pixiData={instance:e,regObj:e.anchor||e.pivot,events:{}}}var s=!1,o={mousedown:{types:["pointerdown"],factory:function(t,e){return function(t){t.currentTarget=t.currentTarget._createjs,t.target=t.target._createjs;var i=t.data;t.rawX=i.global.x,t.rawY=i.global.y,s=!0,e(t)}}},rollover:{types:["pointerover"],factory:function(t,e){return function(t){t.currentTarget=t.currentTarget._createjs,t.target=t.target._createjs;var i=t.data;t.rawX=i.global.x,t.rawY=i.global.y,s=!0,e(t)}}},rollout:{types:["pointerout"],factory:function(t,e){return function(t){t.currentTarget=t.currentTarget._createjs,t.target=t.currentTarget._createjs;var i=t.data;t.rawX=i.global.x,t.rawY=i.global.y,s=!0,e(t)}}},pressmove:{types:["pointermove"],factory:function(t,e){return function(i){if(s){i.currentTarget=t,i.target=i.target&&i.target._createjs;var a=i.data;i.rawX=a.global.x,i.rawY=a.global.y,e(i)}}}},pressup:{types:["pointerup","pointeupoutside"],factory:function(t,e){return function(i){if(s){i.currentTarget=t,s=!1,i.target=i.target&&i.target._createjs;var a=i.data;i.rawX=a.global.x,i.rawY=a.global.y,e(i)}}}}},c=Math.PI/180,p={x:{get:function(){return this._originParams.x},set:function(t){return this._pixiData.instance.x=t,this._originParams.x=t}},y:{get:function(){return this._originParams.y},set:function(t){return this._pixiData.instance.y=t,this._originParams.y=t}},scaleX:{get:function(){return this._originParams.scaleX},set:function(t){return this._pixiData.instance.scale.x=t,this._originParams.scaleX=t}},scaleY:{get:function(){return this._originParams.scaleY},set:function(t){return this._pixiData.instance.scale.y=t,this._originParams.scaleY=t}},skewX:{get:function(){return this._originParams.skewX},set:function(t){return this._pixiData.instance.skew.x=-t*c,this._originParams.skewX=t}},skewY:{get:function(){return this._originParams.skewY},set:function(t){return this._pixiData.instance.skew.y=t*c,this._originParams.skewY=t}},regX:{get:function(){return this._originParams.regX},set:function(t){return this._pixiData.regObj.x=t,this._originParams.regX=t}},regY:{get:function(){return this._originParams.regY},set:function(t){return this._pixiData.regObj.y=t,this._originParams.regY=t}},rotation:{get:function(){return this._originParams.rotation},set:function(t){return this._pixiData.instance.rotation=t*c,this._originParams.rotation=t}},visible:{get:function(){return this._originParams.visible},set:function(t){return t=!!t,this._pixiData.instance.visible=t,this._originParams.visible=t}},alpha:{get:function(){return this._originParams.alpha},set:function(t){return this._pixiData.instance.alpha=t,this._originParams.alpha=t}},_off:{get:function(){return this._originParams._off},set:function(t){return this._pixiData.instance.renderable=!t,this._originParams._off=t}},addEventListener:{value:function(t,e){if(e instanceof Function){if(t in o){for(var i=o[t],a=i.factory(this,e),n=i.types,s=0;s<n.length;s++){var c=n[s];this._pixiData.events[c]=this._pixiData.events[c]||[],this._pixiData.events[c].push({func:a,origin:e}),this._pixiData.instance.on(c,a)}this._pixiData.instance.interactive=!0}return r.DisplayObject.prototype.addEventListener.apply(this,arguments)}}},removeEventListener:{value:function(t,e){if(t in o)for(var i=o[t],a=i.types,n=0;n<a.length;n++){var s=a[n],c=this._pixiData.events[s];if(c){for(var p=c.length-1;p>=0;p--)if(c[p].origin===e){this._pixiData.instance.off(s,c[p].func),c.splice(p,1);break}0===c.length&&delete this._pixiData.events[s]}}var l=r.DisplayObject.prototype.removeEventListener.apply(this,arguments),h=this._listeners;if(!h)return l;for(var u in o)if(h[u]&&h[u].length>0)break;return l}},removeAllEventListeners:{value:function(t){return this._pixiData.instance.removeAllListeners(t),this._pixi.instance.interactive=!1,this._pixiData.events={},r.DisplayObject.prototype.removeAllEventListeners.apply(this,arguments)}},mask:{get:function(){return this._originParams.mask},set:function(t){return t?(t._pixiData.masked.push(this._pixiData.instance),this._pixiData.instance.mask=t._pixiData.instance,this._pixiData.instance.once("added",(function(){this.parent.addChild(t._pixiData.instance)}))):this._pixiData.instance.mask=null,this._originParams.mask=t}},filters:{get:function(){return this._originParams.filters},set:function(t){if(this._pixiData.subInstance)if(t){for(var i=[],a=0;a<t.length;a++){var r=t[a];if(!(r instanceof createjs.ColorMatrixFilter)){var n=new e.filters.ColorMatrixFilter;n.matrix=[r.redMultiplier,0,0,0,r.redOffset/255,0,r.greenMultiplier,0,0,r.greenOffset/255,0,0,r.blueMultiplier,0,r.blueOffset/255,0,0,0,r.alphaMultiplier,r.alphaOffset/255,0,0,0,0,1],i.push(n)}}for(var s=this._pixiData.instance,o=s.children,c=new e.Container,p=this._pixiData.subInstance=c.addChild(new e.Container);o.length;)p.addChild(o[0]);s.addChild(c),s._filterContainer=p,p.updateTransform(),p.calculateBounds();var l=p.getLocalBounds(),h=l.x,u=l.y;for(a=0;a<p.children.length;a++)p.children[a].x-=h,p.children[a].y-=u,p.children[a]._filterContainer&&(p.children[a]._filterContainer.cacheAsBitmap=!1);c.x=h,c.y=u,p.filters=i,p.cacheAsBitmap=!0}else{var d=this._pixiData.instance;if(d._filterContainer){var f=this._pixiData.subInstance,_=f.parent,g=f.children;for(d.removeChildren(),d._filterContainer=null;g.length;){var v=d.addChild(g[0]);v.x+=_.x,v.y+=_.y}f.filters=null,f.cacheAsBitmap=!1,this._pixiData.subInstance=d}}return this._originParams.filters=t}},getPixi:{value:function(){return this._pixiData.instance}}};createjs.MovieClip=function(){n(this,new e.Container),r.MovieClip.apply(this,arguments)},createjs.MovieClip.prototype=Object.defineProperties(Object.create(r.MovieClip.prototype),Object.assign({initialize:{value:function(){return n(this,new e.Container),this._pixiData.subInstance=this._pixiData.instance,r.MovieClip.prototype.initialize.apply(this,arguments)}},addChild:{value:function(t){return this._pixiData.subInstance.addChild(t._pixiData.instance),r.MovieClip.prototype.addChild.call(this,t)}},addChildAt:{value:function(t,e){return this._pixiData.subInstance.addChildAt(t._pixiData.instance,e),r.MovieClip.prototype.addChildAt.call(this,t,e)}},removeChild:{value:function(t){return this._pixiData.subInstance.removeChild(t._pixiData.instance),r.MovieClip.prototype.removeChild.call(this,t)}},removeChildAt:{value:function(t){return this._pixiData.subInstance.removeChildAt(t),r.MovieClip.prototype.removeChildAt.call(this,t)}},removeAllChldren:{value:function(){return this._pixiData.subInstance.removeChildren(),r.MovieClip.prototype.removeAllChldren()}}},p)),createjs.Sprite=function(){n(this,new e.Sprite),r.Sprite.apply(this,arguments)},createjs.Sprite.prototype=Object.defineProperties(Object.create(r.Sprite.prototype),Object.assign({initialize:{value:function(){return n(this,new e.Sprite),r.Sprite.prototype.initialize.apply(this,arguments)}},gotoAndStop:{value:function(){r.Sprite.prototype.gotoAndStop.apply(this,arguments);var t=this.spriteSheet.getFrame(this.currentFrame),i=e.BaseTexture.from(t.image),a=new e.Texture(i,t.rect);this._pixiData.instance.texture=a}}},p)),createjs.Shape=function(){n(this,new e.Container),this._pixiData.masked=[],r.Shape.apply(this,arguments)},createjs.Shape.prototype=Object.defineProperties(Object.create(r.Shape.prototype),Object.assign({graphics:{get:function(){return this._graphics},set:function(t){if(this._pixiData.masked.length)if(this._pixiData.instance.removeChildren(),t)for(var e=0;e<this._pixiData.masked.length;e++)this._pixiData.masked[e].mask=this._pixiData.instance;else for(var i=0;i<this._pixiData.masked.length;i++)this._pixiData.masked[i].mask=null;return t&&this._pixiData.instance.addChild(t._pixiData.instance),this._graphics=t}}},p)),createjs.Graphics=function(){n(this,new e.Graphics),r.Graphics.apply(this,arguments),this._pixiData.instance.beginFill(16772846,1),this._pixiData.strokeFill=0,this._pixiData.strokeAlpha=1};var l,h={0:e.LINE_JOIN.BUTT,1:e.LINE_JOIN.ROUND,2:e.LINE_JOIN.SQUARE},u={0:e.LINE_JOIN.MITER,1:e.LINE_JOIN.ROUND,2:e.LINE_JOIN.BEVEL};createjs.Graphics.prototype=Object.defineProperties(Object.create(r.Graphics.prototype),Object.assign({moveTo:{value:function(t,e){return this._pixiData.instance.clone().endFill().containsPoint({x:t,y:e})?this._pixiData.instance.beginHole():this._pixiData.instance.endHole(),this._pixiData.instance.moveTo(t,e),r.Graphics.prototype.moveTo.call(this,t,e)}},lineTo:{value:function(t,e){return this._pixiData.instance.lineTo(t,e),r.Graphics.prototype.lineTo.call(this,t,e)}},arcTo:{value:function(t,e,i,a,n){return this._pixiData.instance.arcTo(t,e,i,a,n),r.Graphics.prototype.arcTo.call(this,t,e,i,a,n)}},arc:{value:function(t,e,i,a,n,s){return this._pixiData.instance.arc(t,e,i,a,n,s),r.Graphics.prototype.arc.call(this,t,e,i,a,n,s)}},quadraticCurveTo:{value:function(t,e,i,a){return this._pixiData.instance.quadraticCurveTo(t,e,i,a),r.Graphics.prototype.quadraticCurveTo.call(this,t,e,i,a)}},bezierCurveTo:{value:function(t,e,i,a,n,s){return this._pixiData.instance.bezierCurveTo(t,e,i,a,n,s),r.Graphics.prototype.bezierCurveTo.call(this,t,e,i,a,n,s)}},rect:{value:function(t,e,i,a){return this._pixiData.instance.drawRect(t,e,i,a),r.Graphics.prototype.rect.call(this,t,e,i,a)}},closePath:{value:function(){this._pixiData.instance.closePath();this._pixiData.instance.currentPath.points;return r.Graphics.prototype.closePath.call(this)}},clear:{value:function(){return this._pixiData.instance.clear(),r.Graphics.prototype.clear.call(this)}},_parseColor:{value:function(t){var e={color:0,alpha:1};return t?"#"===t.charAt(0)?(e.color=parseInt(t.slice(1),16),e):(t=t.replace(/rgba|\(|\)|\s/g,"").split(","),e.color=65536*Number(t[0])+256*Number(t[1])+Number(t[2]),e.alpha=Number(t[3]),e):(e.alpha=0,e)}},beginFill:{value:function(t){var e=this._parseColor(t);return this._pixiData.instance.beginFill(e.color,e.alpha),r.Graphics.prototype.beginFill.call(this,t)}},endFill:{value:function(){return this._pixiData.instance.endFill(),r.Graphics.prototype.endFill.call(this)}},setStrokeStyle:{value:function(t,e,i,a,n){return this._pixiData.instance.lineStyle({width:t,color:this._pixiData.strokeFill,alpha:this._pixiData.strokeAlpha,cap:e in h?h[e]:e,join:i in u?u[i]:i,miterLimit:a}),r.Graphics.prototype.setStrokeStyle.call(this,t,e,i,a,n)}},beginStroke:{value:function(t){var e=this._parseColor(t);return this._pixiData.strokeFill=e.color,this._pixiData.strokeAlpha=e.alpha,r.Graphics.prototype.beginStroke.call(this,t)}},drawRoundRect:{value:function(t,e,i,a,n){return this._pixiData.instance.drawRoundedRect(t,e,i,a,n),r.Graphics.prototype.drawRoundRect.call(this,t,e,i,a,n)}},drawCircle:{value:function(t,e,i){return this._pixiData.instance.drawCircle(t,e,i),r.Graphics.prototype.drawCircle.call(this,t,e,i)}},drawEllipse:{value:function(t,e,i,a){return this._pixiData.instance.drawEllipse(t,e,i,a),r.Graphics.prototype.drawEllipse.call(this,t,e,i,a)}},drawPolyStar:{value:function(t,e,i,a,n,s){return this._pixiData.instance.drawRegularPolygon(t,e,i,a,s*c),r.Graphics.prototype.drawPolyStar.call(this,t,e,i,a,n,s)}}},p)),Object.defineProperties(createjs.Graphics.prototype,{curveTo:{value:createjs.Graphics.prototype.quadraticCurveTo},drawRect:{value:createjs.Graphics.prototype.rect},mt:{value:createjs.Graphics.prototype.moveTo},lt:{value:createjs.Graphics.prototype.lineTo},at:{value:createjs.Graphics.prototype.arcTo},bt:{value:createjs.Graphics.prototype.bezierCurveTo},qt:{value:createjs.Graphics.prototype.quadraticCurveTo},a:{value:createjs.Graphics.prototype.arc},r:{value:createjs.Graphics.prototype.rect},cp:{value:createjs.Graphics.prototype.closePath},c:{value:createjs.Graphics.prototype.clear},f:{value:createjs.Graphics.prototype.beginFill},ef:{value:createjs.Graphics.prototype.endFill},ss:{value:createjs.Graphics.prototype.setStrokeStyle},s:{value:createjs.Graphics.prototype.beginStroke},dr:{value:createjs.Graphics.prototype.drawRect},rr:{value:createjs.Graphics.prototype.drawRoundRect},dc:{value:createjs.Graphics.prototype.drawCircle},de:{value:createjs.Graphics.prototype.drawEllipse},dp:{value:createjs.Graphics.prototype.drawPolyStar}}),createjs.Text=function(t,i,a){n(this,new e.Container),this._originParams=Object.assign(this._originParams,{text:t,font:i,color:a,textAlign:"left",lineHeight:0,lineWidth:0});var s=this._parseFont(i);this._pixiData.instance.text=this._pixiData.instance.addChild(new e.Text(t,{fontSize:s.fontSize,fontFamily:s.fontFamily,fill:this._parseColor(a),wordWrap:!0})),r.Text.apply(this,arguments)},createjs.Text.prototype=Object.defineProperties(Object.create(r.Text.prototype),Object.assign({text:{get:function(){return this._originParams.text},set:function(t){return this._pixiData.instance.text.text=t,this._align(this.textAlign),this._originParams.text=t}},_parseFont:{value:function(t){var e=t.split(" ");return{fontSize:Number(e.shift().replace("px","")),fontFamily:e.join(" ").replace(/'/g,"")}}},font:{get:function(){return this._originParams.font},set:function(t){var e=this._parseFont(t);return this._pixiData.instance.text.style.fontSize=e.fontSize,this._pixiData.instance.text.style.fontFamily=e.fontFamily,this._originParams.font=t}},_parseColor:{value:function(t){return parseInt(t.slice(1),16)}},color:{get:function(){return this._originParams.color},set:function(t){return this._pixiData.instance.text.style.fill=this._parseColor(t),this._originParams.color=t}},_align:{value:function(t){"left"!==t?"center"!==t?"right"!==t||(this._pixiData.instance.text.x=-this.lineWidth):this._pixiData.instance.text.x=-this.lineWidth/2:this._pixiData.instance.text.x=0}},textAlign:{get:function(){return this._originParams.textAlign},set:function(t){return this._pixiData.instance.text.style.align=t,this._align(t),this._originParams.textAlign=t}},lineHeight:{get:function(){return this._originParams.lineHeight},set:function(t){return this._pixiData.instance.text.lineHeight=t,this._originParams.lineHeight=t}},lineWidth:{get:function(){return this._originParams.lineWidth},set:function(t){return this._pixiData.instance.text.lineWidthWrap=t,this._originParams.lineWidth=t}}},p)),createjs.ButtonHelper=function(){n(this,new e.Container),r.ButtonHelper.apply(this,arguments);var t=arguments[0],i=t._pixiData.instance,a=arguments[1],s=arguments[2],o=arguments[3],c=arguments[5],p=arguments[6];c.gotoAndStop(p);var l=i.addChild(c._pixiData.instance);l.alpha=1e-5;var h=!1,u=!1;l.on("pointerover",(function(){h=!0,u?t.gotoAndStop(o):t.gotoAndStop(s)})),l.on("pointerout",(function(){h=!1,u?t.gotoAndStop(s):t.gotoAndStop(a)})),l.on("pointerdown",(function(){u=!0,t.gotoAndStop(o)})),l.on("pointerup",(function(){u=!1,h?t.gotoAndStop(s):t.gotoAndStop(a)})),l.on("pointerupoutside",(function(){u=!1,h?t.gotoAndStop(s):t.gotoAndStop(a)})),l.interactive=!0,l.cursor="pointer"},createjs.ButtonHelper.prototype=Object.create(r.ButtonHelper.prototype),function(t){!function(t){var r=function(t,i,a,r){void 0===r&&(r={});var n=window.AdobeAn.getComposition(t);if(!n)throw new Error("no composition");var s=n.getLibrary(),o=s[i];if(!o)throw new Error("no root class");var c=s.properties;this._app=new e.Application(Object.assign(r,{width:c.width,height:c.height,backgroundColor:parseInt(c.color.slice(1),16)})),document.body.appendChild(this._app.view),this._app.stop(),this._composition=n,this._rootClass=o,this._basepath=a,window.createjs.Ticker.framerate=c.fps,this._handleTick=this._handleStop,window.createjs.Ticker.addEventListener("tick",this._tick.bind(this))},n={app:{configurable:!0}};r.prototype.initAsync=function(t){var e=this;return void 0===t&&(t={}),i(this._basepath,this._composition).then((function(){var i=e._composition.getLibrary(),r=new e._rootClass;e._stage=new i.Stage,a(e._stage,t),Object.defineProperties(window,{exportRoot:{value:r},stage:{value:e._stage}}),window.AdobeAn.compositionLoaded(i.properties.id),e._app.render(),e._stage.addChild(r),e._app.stage.addChild(r.getPixi())}))},r.prototype.play=function(){return this._handleTick=this._handlePlay,this},r.prototype.stop=function(){return this._handleTick=this._handleStop,this},r.prototype._tick=function(){this._handleTick()},r.prototype._handlePlay=function(){this._stage._tickFunction(),this.app.render()},r.prototype._handleStop=function(){},n.app.get=function(){return this._app},Object.defineProperties(r.prototype,n),t.Player=r}(t.createjs||(t.createjs={}))}(l||(l={}));var d=l.createjs.Player;t.Player=d}(this.PIXI.createjs=this.PIXI.createjs||{},PIXI);//# sourceMappingURL=pixi-createjs-player.min.js.map
