{"version":3,"file":"pixi-createjs-player.js","sources":["../src/common/core.js","../src/common/global.ts","../src/pixi/Player.ts"],"sourcesContent":["import * as PIXI from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initAsync(basepath, comp) {\r\n\treturn new Promise(function(resolve, reject) {\r\n\t\tconst lib = comp.getLibrary();\r\n\t\t\r\n\t\tif (lib.properties.manifest.length === 0) {\r\n\t\t\tresolve({\r\n\t\t\t\tevt: {},\r\n\t\t\t\tcomp: comp\r\n\t\t\t});\r\n\t\t}\r\n\t\t\n\t\tconst loader = new createjs.LoadQueue(false);\r\n\t\t\r\n\t\tloader.installPlugin(createjs.Sound);\r\n\t\t\n\t\tloader.addEventListener('fileload', function(evt) {\r\n\t\t\thandleFileLoad(evt, comp);\r\n\t\t});\r\n\t\t\n\t\tloader.addEventListener('complete', function(evt) {\r\n\t\t\tresolve({\r\n\t\t\t\tevt: evt,\r\n\t\t\t\tcomp: comp\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tif (basepath) {\r\n\t\t\tbasepath = (basepath + '/').replace(/\\/\\//g, '/');\r\n\t\t\tconst m = lib.properties.manifest;\r\n\t\t\tfor (let i = 0; i < m.length; i++) {\r\n\t\t\t\tm[i].src = basepath + m[i].src;\r\n\t\t\t}\n\t\t}\r\n\t\t\r\n\t\tloader.loadManifest(lib.properties.manifest);\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n\tconst images = comp.getImages();\r\n\tif (evt && (evt.item.type == 'image')) {\r\n\t\timages[evt.item.id] = evt.result;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage, options) {\r\n\toptions = options || {};\r\n\t\r\n\tif (options.useSynchedTimeline) {\r\n\t\tfunction containerDrawFunction() {\r\n\t\t\tconst list = this.children.slice();\r\n\t\t\tfor (let i = 0,l = list.length; i < l; i++) {\r\n\t\t\t\tconst child = list[i];\r\n\t\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\tchild.draw();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t\r\n\t\tfunction imageDrawFunction() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tObject.defineProperties(createjs.MovieClip.prototype, {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: function() {\r\n\t\t\t\t\tthis._updateState();\r\n\t\t\t\t\treturn this._containerDraw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t_containerDraw: {\r\n\t\t\t\tvalue: containerDrawFunction\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tconst imageDescriptors = {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: imageDrawFunction\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tObject.defineProperties(createjs.Sprite.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Graphics.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Shape.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Text.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Bitmap.prototype, imageDescriptors);\r\n\t\t\r\n\t\tstage.update = function(props) {\r\n\t\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\t\tthis.dispatchEvent(\"drawstart\");\n\t\t\tif (this.autoClear) { this.clear(); }\n\t\t\t\n\t\t\tif (this._webGLContext) {\n\t\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.draw();\n\t\t\t}\r\n\t\t\t\n\t\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t}\r\n\t\t\r\n\t\tstage.draw = containerDrawFunction;\r\n\t\t\r\n\t\tstage._updateFunction = stage.update;\r\n\t} else {\r\n\t\tstage._updateFunction = stage.tick;\r\n\t}\r\n\t\r\n\tif (stage._handleTick) {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t\tstage._handleTick();\r\n\t\t};\r\n\t} else {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t};\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst createjsOrigin = {\r\n\tDisplayObject: createjs.DisplayObject,\r\n\tMovieClip: createjs.MovieClip,\r\n\tSprite: createjs.Sprite,\r\n\tContainer: createjs.Container,\r\n\tText: createjs.Text,\r\n\tShape: createjs.Shape,\r\n\tGraphics: createjs.Graphics,\r\n\tButtonHelper: createjs.ButtonHelper\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction overrideCreatejs(self, pixi) {\r\n\tself._originParams = {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregx: 0,\r\n\t\tregy: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null,\r\n\t\tfilters: null\r\n\t};\r\n\t\r\n\tpixi._createjs = self;\r\n\t\r\n\tself._pixiData = {\r\n\t\tinstance: pixi,\r\n\t\tregObj: pixi.anchor || pixi.pivot,\r\n\t\tevents: {}\r\n\t};\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _downInstance;\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = createjsOrigin.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet f = false;\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tf = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new PIXI.filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new PIXI.Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new PIXI.Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t},\r\n\tgetPixi: {\r\n\t\tvalue: function() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t}\r\n};\r\n\r\ncreatejs.MovieClip = function _MovieClip() {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\tcreatejsOrigin.MovieClip.apply(this, arguments);\r\n}\r\n\r\ncreatejs.MovieClip.prototype = Object.defineProperties(Object.create(createjsOrigin.MovieClip.prototype), Object.assign({\r\n\tinitialize: {\r\n\t\tvalue: function() {\r\n\t\t\toverrideCreatejs(this, new PIXI.Container());\r\n\t\t\tthis._pixiData.subInstance = this._pixiData.instance;//.addChild(new PIXI.Container());\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.initialize.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\taddChild: {\r\n\t\tvalue: function(child) {\r\n\t\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.addChild.call(this, child);\r\n\t\t}\r\n\t},\r\n\taddChildAt: {\r\n\t\tvalue: function(child, index) {\r\n\t\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.addChildAt.call(this, child, index);\r\n\t\t}\r\n\t},\r\n\tremoveChild: {\r\n\t\tvalue: function(child) {\r\n\t\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.removeChild.call(this, child);\r\n\t\t}\r\n\t},\r\n\tremoveChildAt: {\r\n\t\tvalue: function(index) {\r\n\t\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.removeChildAt.call(this, index);\r\n\t\t}\r\n\t}\r\n\t,\r\n\tremoveAllChldren: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.removeAllChldren();\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.Sprite = function _Sprite() {\r\n\toverrideCreatejs(this, new PIXI.Sprite());\r\n\tcreatejsOrigin.Sprite.apply(this, arguments);\r\n}\r\n\r\ncreatejs.Sprite.prototype = Object.defineProperties(Object.create(createjsOrigin.Sprite.prototype), Object.assign({\r\n\tinitialize: {\r\n\t\tvalue: function() {\r\n\t\t\toverrideCreatejs(this, new PIXI.Sprite());\r\n\t\t\treturn createjsOrigin.Sprite.prototype.initialize.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tgotoAndStop: {\r\n\t\tvalue: function() {\r\n\t\t\tcreatejsOrigin.Sprite.prototype.gotoAndStop.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\t\tconst baseTexture = PIXI.BaseTexture.from(frame.image);\r\n\t\t\tconst texture = new PIXI.Texture(baseTexture, frame.rect);\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.texture = texture;\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.Shape = function _Shape() {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\tthis._pixiData.masked = [];\r\n\t\r\n\tcreatejsOrigin.Shape.apply(this, arguments);\r\n}\r\n\r\ncreatejs.Shape.prototype = Object.defineProperties(Object.create(createjsOrigin.Shape.prototype), Object.assign({\r\n\tgraphics: {\r\n\t\tget: function() {\r\n\t\t\treturn this._graphics;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.masked.length) {\r\n\t\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\t\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._graphics = value;\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.Graphics = function _Graphics() {\r\n\toverrideCreatejs(this, new PIXI.Graphics());\r\n\tcreatejsOrigin.Graphics.apply(this, arguments);\r\n\t\r\n\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\r\n\tthis._pixiData.strokeFill = 0;\r\n\tthis._pixiData.strokeAlpha = 1;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: PIXI.LINE_JOIN.BUTT,\r\n\t1: PIXI.LINE_JOIN.ROUND,\r\n\t2: PIXI.LINE_JOIN.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: PIXI.LINE_JOIN.MITER,\r\n\t1: PIXI.LINE_JOIN.ROUND,\r\n\t2: PIXI.LINE_JOIN.BEVEL\r\n};\r\n\r\ncreatejs.Graphics.prototype = Object.defineProperties(Object.create(createjsOrigin.Graphics.prototype), Object.assign({\r\n\tmoveTo: {\r\n\t\tvalue: function(x, y) {\r\n\t\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.endHole();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.moveTo.call(this, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\tlineTo: {\r\n\t\tvalue: function(x, y) {\r\n\t\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.lineTo.call(this, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\tarcTo: {\r\n\t\tvalue: function(x1, y1, x2, y2, radius) {\r\n\t\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.arcTo.call(this, x1, y1, x2, y2, radius);\r\n\t\t}\r\n\t},\r\n\t\r\n\tarc: {\r\n\t\tvalue: function(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.arc.call(this, x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t}\r\n\t},\r\n\t\r\n\tquadraticCurveTo: {\r\n\t\tvalue: function(cpx, cpy, x, y) {\r\n\t\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.quadraticCurveTo.call(this, cpx, cpy, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\tbezierCurveTo: {\r\n\t\tvalue: function(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.bezierCurveTo.call(this, cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\trect: {\r\n\t\tvalue: function(x, y, w, h) {\r\n\t\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.rect.call(this, x, y, w, h);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclosePath: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.instance.closePath();\r\n\t\t\t\r\n\t\t\tconst points = this._pixiData.instance.currentPath.points;\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.closePath.call(this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclear: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.instance.clear();\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.clear.call(this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_parseColor: {\r\n\t\tvalue: function(color) {\r\n\t\t\tconst res = {\r\n\t\t\t\tcolor: 0,\r\n\t\t\t\talpha: 1\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (!color) {\r\n\t\t\t\tres.alpha = 0;\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (color.charAt(0) === '#') {\r\n\t\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolor = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\t\r\n\t\t\tres.color = Number(color[0]) * COLOR_RED + Number(color[1]) * COLOR_GREEN + Number(color[2]);\r\n\t\t\tres.alpha = Number(color[3]);\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\t\r\n\tbeginFill: {\r\n\t\tvalue: function(color) {\r\n\t\t\tconst c = this._parseColor(color);\r\n\t\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.beginFill.call(this, color);\r\n\t\t}\r\n\t},\r\n\t\r\n\tendFill: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.instance.endFill();\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.endFill.call(this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetStrokeStyle: {\r\n\t\tvalue: function(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\t\tthis._pixiData.instance.lineStyle({\r\n\t\t\t\twidth: thickness,\r\n\t\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\t\tcap: (caps in LineCap) ? LineCap[caps] : caps,\r\n\t\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : joints,\r\n\t\t\t\tmiterLimit: miterLimit\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.setStrokeStyle.call(this, thickness, caps, joints, miterLimit, ignoreScale);\r\n\t\t}\r\n\t},\r\n\t\r\n\tbeginStroke: {\r\n\t\tvalue: function(color) {\r\n\t\t\tconst c = this._parseColor(color);\r\n\t\t\tthis._pixiData.strokeFill = c.color;\r\n\t\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.beginStroke.call(this, color);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawRoundRect: {\r\n\t\tvalue: function(x, y, w, h, radius) {\r\n\t\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawRoundRect.call(this, x, y, w, h, radius);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawCircle: {\r\n\t\tvalue: function(x, y, radius) {\r\n\t\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawCircle.call(this, x, y, radius);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawEllipse: {\r\n\t\tvalue: function(x, y, w, h) {\r\n\t\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawEllipse.call(this, x, y, w, h);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawPolyStar: {\r\n\t\tvalue: function(x, y, radius, sides, pointSize, angle) {\r\n\t\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawPolyStar.call(this, x, y, radius, sides, pointSize, angle);\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\nObject.defineProperties(createjs.Graphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: createjs.Graphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: createjs.Graphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: createjs.Graphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: createjs.Graphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: createjs.Graphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: createjs.Graphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: createjs.Graphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: createjs.Graphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: createjs.Graphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: createjs.Graphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: createjs.Graphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: createjs.Graphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: createjs.Graphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: createjs.Graphics.prototype.drawPolyStar\r\n\t}\r\n});\r\n\r\ncreatejs.Text = function _Text(text, font, color) {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\t\r\n\tthis._originParams = Object.assign(this._originParams, {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: 'left',\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n\t\r\n\tconst _font = this._parseFont(font);\r\n\t\r\n\tthis._pixiData.instance.text = this._pixiData.instance.addChild(new PIXI.Text(text, {\r\n\t\tfontSize: _font.fontSize,\r\n\t\tfontFamily: _font.fontFamily,\r\n\t\tfill: this._parseColor(color),\r\n\t\twordWrap: true\r\n\t}));\r\n\t\r\n\tcreatejsOrigin.Text.apply(this, arguments);\r\n}\r\n\r\ncreatejs.Text.prototype = Object.defineProperties(Object.create(createjsOrigin.Text.prototype), Object.assign({\r\n\ttext: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.text;\r\n\t\t},\r\n\t\tset: function(text) {\r\n\t\t\tthis._pixiData.instance.text.text = text;\r\n\t\t\tthis._align(this.textAlign);\r\n\t\t\t\r\n\t\t\treturn this._originParams.text = text;\r\n\t\t}\r\n\t},\r\n\t_parseFont: {\r\n\t\tvalue: function(font) {\r\n\t\t\tconst p = font.split(' ');\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tfontSize: Number(p.shift().replace('px', '')),\r\n\t\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tfont: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.font;\r\n\t\t},\r\n\t\tset: function(font) {\r\n\t\t\tconst _font = this._parseFont(font);\r\n\t\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\t\r\n\t\t\treturn this._originParams.font = font;\r\n\t\t}\r\n\t},\r\n\t_parseColor: {\r\n\t\tvalue: function(color) {\r\n\t\t\treturn parseInt(color.slice(1), 16);\r\n\t\t}\r\n\t},\r\n\tcolor: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.color;\r\n\t\t},\r\n\t\tset: function(color) {\r\n\t\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\t\r\n\t\t\treturn this._originParams.color = color;\r\n\t\t}\r\n\t},\r\n\t_align: {\r\n\t\tvalue: function(align) {\r\n\t\t\tif (align === 'left') {\r\n\t\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (align === 'center') {\r\n\t\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (align === 'right') {\r\n\t\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ttextAlign: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.textAlign;\r\n\t\t},\r\n\t\tset: function(align) {\r\n\t\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\t\tthis._align(align);\r\n\t\t\t\r\n\t\t\treturn this._originParams.textAlign = align;\r\n\t\t}\r\n\t},\r\n\tlineHeight: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.lineHeight;\r\n\t\t},\r\n\t\tset: function(height) {\r\n\t\t\tthis._pixiData.instance.text.lineHeight = height;\r\n\t\t\t\r\n\t\t\treturn this._originParams.lineHeight = height;\r\n\t\t}\r\n\t},\r\n\tlineWidth: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.lineWidth;\r\n\t\t},\r\n\t\tset: function(width) {\r\n\t\t\tthis._pixiData.instance.text.lineWidthWrap = width;\r\n\t\t\t\r\n\t\t\treturn this._originParams.lineWidth = width;\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.ButtonHelper = function _ButtonHelper() {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\t\r\n\tcreatejsOrigin.ButtonHelper.apply(this, arguments);\r\n\t\r\n\tconst createjs = arguments[0];\r\n\tconst pixi = createjs._pixiData.instance;\r\n\t\r\n\tconst baseFrame = arguments[1];\r\n\tconst overFrame = arguments[2];\r\n\tconst downFrame = arguments[3];\r\n\tconst hit = arguments[5];\r\n\tconst hitFrame = arguments[6];\r\n\t\r\n\thit.gotoAndStop(hitFrame);\r\n\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\thitPixi.alpha = 0.00001\r\n\t\r\n\tlet isOver = false;\r\n\tlet isDown = false;\r\n\t\r\n\thitPixi.on('pointerover', function() {\r\n\t\tisOver = true;\r\n\t\tif (isDown) {\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.on('pointerout', function() {\r\n\t\tisOver = false;\r\n\t\t\r\n\t\tif (isDown) {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.on('pointerdown', function() {\r\n\t\tisDown = true;\r\n\t\tcreatejs.gotoAndStop(downFrame);\r\n\t});\r\n\t\r\n\thitPixi.on('pointerup', function() {\r\n\t\tisDown = false;\r\n\t\tif (isOver) {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.on('pointerupoutside', function() {\r\n\t\tisDown = false;\r\n\t\tif (isOver) {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.interactive = true;\r\n\thitPixi.cursor = 'pointer';\r\n}\r\n\r\ncreatejs.ButtonHelper.prototype = Object.create(createjsOrigin.ButtonHelper.prototype);\r\n\r\n/*\r\nconst originTo = createjs.Tween.prototype.to;\r\ncreatejs.Tween.prototype.to = function() {\r\n\tconst obj = arguments[0];\r\n\t\r\n\tif ('rotation' in obj) {\r\n\t\tconst prevRotation = this._prevRotation || 0;\r\n\t\t\r\n\t\tif (Math.abs(obj.rotation - prevRotation) >= 360) {\r\n\t\t\tif ('skewX' in obj) {\r\n\t\t\t\tobj.skewX += 360;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ('skewY' in obj) {\r\n\t\t\t\tobj.skewY += 360;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._prevRotation = obj.rotation;\r\n\t}\r\n\t\r\n\treturn originTo.apply(this, arguments);\r\n};\r\n*/","/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nfunction playSound(id: string, loop: boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","import { initAsync, initStage } from '../common/core';\r\nimport * as _PIXI from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace PIXI {\r\n\texport namespace createjs {\r\n\t\t/**\r\n\t\t * @property useSynchedTimeline Whether the movie clip plays when placed as a \"graphic\".\r\n\t\t */\r\n\t\texport type TCreatejsPlayerOption = {\r\n\t\t\tuseSynchedTimeline?: boolean\r\n\t\t};\r\n\t\t\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player {\r\n\t\t\tprivate _app: _PIXI.Application;\r\n\t\t\tprivate _composition: any;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\tprivate _handleTick: Function;\r\n\t\t\t\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tthis._app = new _PIXI.Application(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}));\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.appendChild(this._app.view);\r\n\t\t\t\tthis._app.stop();\r\n\t\t\t\t\r\n\t\t\t\tthis._composition = comp;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleStop;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._tick.bind(this));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinitAsync(options: TCreatejsPlayerOption = {}) {\r\n\t\t\t\treturn initAsync(this._basepath, this._composition)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tconst evt = data.evt;\r\n\t\t\t\t\t\tconst comp = data.comp;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst lib = comp.getLibrary();\n\t\t\t\t\t\tconst ss = comp.getSpriteSheet();\n\t\t\t\t\t\tconst queue = evt.target;\n\t\t\t\t\t\tconst ssMetadata = lib.ssMetadata;\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (let i = 0; i < ssMetadata.length; i++) {\n\t\t\t\t\t\t\tss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n\t\t\t\t\t\t\t\timages: [\r\n\t\t\t\t\t\t\t\t\tqueue.getResult(ssMetadata[i].name)\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\tframes: ssMetadata[i].frames\r\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tinitStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._app.render();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._app.stage.addChild(exportRoot.getPixi());\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\tthis._handleTick = this._handlePlay;\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\tthis._handleTick = this._handleStop;\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _tick() {\r\n\t\t\t\tthis._handleTick();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handlePlay() {\r\n\t\t\t\tthis._stage._tickFunction();\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleStop() {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tget app(): _PIXI.Application {\r\n\t\t\t\treturn this._app;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TCreatejsPlayerOption = PIXI.createjs.TCreatejsPlayerOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = PIXI.createjs.Player;"],"names":["initAsync","basepath","comp","Promise","resolve","reject","const","lib","getLibrary","properties","manifest","length","evt","loader","createjs","LoadQueue","installPlugin","Sound","addEventListener","images","getImages","item","type","id","result","handleFileLoad","replace","m","i","src","loadManifest","initStage","stage","options","useSynchedTimeline","containerDrawFunction","list","this","children","slice","l","child","isVisible","draw","Object","defineProperties","MovieClip","prototype","value","_updateState","_containerDraw","imageDescriptors","Sprite","Graphics","Shape","Text","Bitmap","update","props","tickOnUpdate","tick","dispatchEvent","autoClear","clear","_webGLContext","_batchDraw","_autoPurge","_drawID","purgeTextures","_updateFunction","_handleTick","_tickFunction","e","window","playSound","loop","play","interrupt","INTERRUPT_EARLY","createjsOrigin","DisplayObject","Container","ButtonHelper","overrideCreatejs","self","pixi","_originParams","x","y","scaleX","scaleY","regx","regy","skewX","skewY","rotation","visible","alpha","_off","mask","filters","_createjs","_pixiData","instance","regObj","anchor","pivot","events","let","_isDown","EventMap","mousedown","types","factory","cb","currentTarget","target","ev","data","rawX","global","rawY","rollover","rollout","pressmove","pressup","DEG_TO_RAD","Math","PI","appendixDescriptor","get","set","scale","skew","regX","regY","renderable","Function","func","t","push","origin","on","interactive","apply","arguments","removeEventListener","j","off","splice","res","listeners","_listeners","removeAllEventListeners","removeAllListeners","_pixi","masked","once","parent","addChild","subInstance","f","ColorMatrixFilter","PIXI.filters","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","PIXI.Container","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","getPixi","create","assign","initialize","call","addChildAt","index","removeChild","removeChildAt","removeAllChldren","PIXI.Sprite","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","PIXI.BaseTexture","from","image","texture","PIXI.Texture","rect","graphics","_graphics","PIXI.Graphics","beginFill","strokeFill","strokeAlpha","PIXI","LineCap","0","PIXI.LINE_JOIN","BUTT","1","ROUND","2","SQUARE","LineJoin","MITER","BEVEL","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTo","x1","y1","x2","y2","radius","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","currentPath","points","_parseColor","color","charAt","parseInt","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineStyle","width","cap","join","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","ss","s","dr","rr","dc","de","dp","text","font","textAlign","lineHeight","lineWidth","_font","_parseFont","PIXI.Text","fontSize","fontFamily","fill","wordWrap","_align","p","shift","style","align","height","lineWidthWrap","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","Player","rootName","pixiOptions","AdobeAn","getComposition","Error","root","prop","_app","_PIXI.Application","backgroundColor","document","body","appendChild","view","stop","_composition","_rootClass","_basepath","Ticker","framerate","fps","_handleStop","_tick","bind","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","exportRoot","_stage","Stage","compositionLoaded","render","_handlePlay","app","prototypeAccessors"],"mappings":"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"}