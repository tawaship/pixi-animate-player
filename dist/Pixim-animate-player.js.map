{"version":3,"file":"Pixim-animate-player.js","sources":["../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/pixim/Player.ts","../src/common/global.ts","../src/common/core.ts"],"sourcesContent":["/*!\n * @tawaship/pixi-animate-core.js - v1.0.7\n * \n * @require pixi.js v5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport { Container, Sprite, BaseTexture, Texture, Graphics, LINE_CAP, LINE_JOIN, Text } from 'pixi.js';\n\n/**\r\n * @private\r\n */\r\nfunction createOriginParams() {\r\n    return {\r\n        x: 0,\r\n        y: 0,\r\n        scaleX: 0,\r\n        scaleY: 0,\r\n        regx: 0,\r\n        regy: 0,\r\n        skewX: 0,\r\n        skewY: 0,\r\n        rotation: 0,\r\n        visible: true,\r\n        alpha: 1,\r\n        _off: false,\r\n        mask: null,\r\n        filters: null\r\n    };\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction createPixiData(regObj) {\r\n    return {\r\n        regObj,\r\n        events: {}\r\n    };\r\n}\r\nfunction updateDisplayObjectChildren(self, e) {\r\n    const list = self.children.slice();\r\n    for (let i = 0, l = list.length; i < l; i++) {\r\n        const child = list[i];\r\n        if (!child.isVisible()) {\r\n            continue;\r\n        }\r\n        //child.draw();\r\n        child.updateForPixi(e);\r\n    }\r\n    return true;\r\n}\n\nclass CreatejsStageGL extends window.createjs.StageGL {\r\n\tupdateForPixi(props) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t}\r\n}\n\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD$1 = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD$1;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD$1;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD$1;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn window.createjs.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn window.createjs.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = window.createjs.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn window.createjs.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new PIXI.filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new PIXI.Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new PIXI.Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction appendDisplayObjectDescriptor(cls) {\r\n\tObject.defineProperties(cls.prototype, appendixDescriptor);\r\n}\n\n/**\r\n * @ignore\r\n */\r\nclass PixiMovieClip extends Container {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createMovieClipPixiData(cjs) {\r\n\tconst pixi = new PixiMovieClip(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi,\r\n\t\tsubInstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsMovieClip extends window.createjs.MovieClip {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createMovieClipPixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createMovieClipPixiData(this);\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\taddChild(child) {\r\n\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child, index) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child) {\r\n\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e) {\r\n\t\tthis._updateState();\r\n\t\t\r\n\t\treturn updateDisplayObjectChildren(this, e);\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsMovieClip);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiSprite extends Sprite {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createSpritePixiData(cjs) {\r\n\tconst pixi = new PixiSprite(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.anchor), {\r\n\t\tinstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsSprite extends window.createjs.Sprite {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createSpritePixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createSpritePixiData(this);\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\tgotoAndStop() {\r\n\t\tsuper.gotoAndStop(...arguments);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsSprite);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiShape extends Container {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createShapePixiData(cjs) {\r\n\tconst pixi = new PixiShape(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi,\r\n\t\tmasked: []\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsShape extends window.createjs.Shape {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createShapePixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t}\r\n\t\t\r\n\t\tthis._graphics = value;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsShape);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiGraphics extends Graphics {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createGraphicsPixiData(cjs) {\r\n\tconst pixi = new PixiGraphics(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi,\r\n\t\tstrokeFill: 0,\r\n\t\tstrokeAlpha: 1\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_CAP.BUTT,\r\n\t1: LINE_CAP.ROUND,\r\n\t2: LINE_CAP.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsGraphics extends window.createjs.Graphics {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createGraphicsPixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t}\r\n\t\r\n\tmoveTo(x, y) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x, y) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTo(x1, y1, x2, y2, radius) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx, cpy, x, y) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tconst colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n\t\tres.alpha = Number(colors[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis._pixiData.instance.lineTextureStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n\t\t\tmiterLimit: miterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x, y, w, h, radius) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x, y, radius) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsGraphics);\r\n\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: CreatejsGraphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: CreatejsGraphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: CreatejsGraphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: CreatejsGraphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: CreatejsGraphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: CreatejsGraphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: CreatejsGraphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: CreatejsGraphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: CreatejsGraphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: CreatejsGraphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: CreatejsGraphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: CreatejsGraphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: CreatejsGraphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: CreatejsGraphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: CreatejsGraphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: CreatejsGraphics.prototype.drawPolyStar\r\n\t}\r\n});\n\n/**\r\n * @ignore\r\n */\r\nclass PixiText extends Text {\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass PixiTextContainer extends Container {\r\n\tconstructor(cjs, text) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t\tthis._text = text;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._text;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createTextOriginParam(text, font, color) {\r\n\treturn Object.assign(createOriginParams(), {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: 'left',\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createTextPixiData(cjs, text) {\r\n\tconst pixi = new PixiTextContainer(cjs, text);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsText extends window.createjs.Text {\r\n\tconstructor(text, font, color) {\r\n\t\tthis._originParams = createTextOriginParam(text, font, color);\r\n\t\t\r\n\t\tconst _font = this._parseFont(font);\r\n\t\t\r\n\t\tconst t = new PixiText(text, {\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._pixiData = createTextPixiData(this, t);\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._originParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._originParams.text = text;\r\n\t}\r\n\t\r\n\t_parseFont(font) {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontSize: Number((p.shift() || '0px').replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._originParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\tthis._originParams.font = font;\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._originParams.color;\r\n\t}\r\n\t\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\tthis._originParams.color = color;\r\n\t}\r\n\t\r\n\t_align(align) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._originParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\tthis._originParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._originParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.style.lineHeight = height;\r\n\t\t\r\n\t\tthis._originParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._originParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.style.wordWrapWidth = width;\r\n\t\t\r\n\t\tthis._originParams.lineWidth = width;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsText);\n\n/**\r\n * @ignore\r\n */\r\nclass PixiButtonHelper extends Container {\r\n\tconstructor(cjs) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createButtonHelperPixiData(cjs) {\r\n\tconst pixi = new PixiButtonHelper(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData(pixi.pivot), {\r\n\t\tinstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass CreatejsButtonHelper extends window.createjs.ButtonHelper {\r\n\tconstructor() {\r\n\t\tthis._originParams = createOriginParams();\r\n\t\tthis._pixiData = createButtonHelperPixiData(this);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t\t\r\n\t\tconst createjs = arguments[0];\r\n\t\tconst pixi = createjs._pixiData.instance;\r\n\t\t\r\n\t\tconst baseFrame = arguments[1];\r\n\t\tconst overFrame = arguments[2];\r\n\t\tconst downFrame = arguments[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = arguments[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n}\r\n\r\nappendDisplayObjectDescriptor(CreatejsButtonHelper);\n\n/**\r\n * Prepare createjs content published with Adobe Animate.\r\n * @param id \"lib.properties.id\" in Animate content.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction prepareAnimateAsync(id, basepath, options = {}) {\r\n    const comp = window.AdobeAn.getComposition(id);\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    if (!options.useSynchedTimeline) {\r\n        Object.defineProperties(window.createjs.MovieClip.prototype, {\r\n            updateForPixi: {\r\n                value: function (e) {\r\n                    return this._tick(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        const loader = new window.createjs.LoadQueue(false);\r\n        loader.installPlugin(window.createjs.Sound);\r\n        loader.addEventListener('fileload', function (evt) {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', function (evt) {\r\n            resolve(evt);\r\n        });\r\n        if (basepath) {\r\n            basepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n            const m = lib.properties.manifest;\r\n            for (let i = 0; i < m.length; i++) {\r\n                m[i].src = basepath + m[i].src;\r\n            }\r\n        }\r\n        loader.loadManifest(lib.properties.manifest);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\nfunction initializeAnimate(obj = {}) {\r\n    window.createjs.StageGL = CreatejsStageGL;\r\n    window.createjs.MovieClip = CreatejsMovieClip;\r\n    window.createjs.Sprite = CreatejsSprite;\r\n    window.createjs.Shape = CreatejsShape;\r\n    //window.createjs.Bitmap = createjs.CreatejsBitmap;\r\n    window.createjs.Graphics = CreatejsGraphics;\r\n    window.createjs.Text = CreatejsText;\r\n    window.createjs.ButtonHelper = CreatejsButtonHelper;\r\n    for (let i in obj) {\r\n        window.createjs[i] = obj[i];\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { CreatejsButtonHelper, CreatejsGraphics, CreatejsMovieClip, CreatejsShape, CreatejsSprite, CreatejsStageGL, CreatejsText, PixiButtonHelper, PixiGraphics, PixiMovieClip, PixiShape, PixiSprite, PixiText, PixiTextContainer, initializeAnimate, prepareAnimateAsync, updateDisplayObjectChildren };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import { prepareAnimateAsync, TAnimateLibrary, TPlayerOption } from '@tawaship/pixi-animate-core';\r\nimport { initStage } from '../common/core';\r\nimport * as _Pixim from '@tawaship/pixim.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace Pixim {\r\n\texport namespace animate {\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player extends _Pixim.Application {\r\n\t\t\tprivate _id: string;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @param id \"lib.properties.id\" in Animate content.\r\n\t\t\t * @param rootName Root class name of Animate content.\r\n\t\t\t * @param basepath Directory path of Animate content.\r\n\t\t\t * @param pixiOptions Options of PIXI.Application.\r\n\t\t\t * @param piximOptions Options of Pixim.Application.\r\n\t\t\t */\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}, piximOptions: _Pixim.TApplicationOption = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib: TAnimateLibrary = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tsuper(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}), piximOptions);\r\n\t\t\t\t\r\n\t\t\t\tthis.app.render();\r\n\t\t\t\t\r\n\t\t\t\tthis._id = id;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleTick.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Prepare createjs content published with Adobe Animate.\r\n\t\t\t * @async\r\n\t\t\t */\r\n\t\t\tprepareAsync(options: TPlayerOption = {}) {\r\n\t\t\t\treturn prepareAnimateAsync(this._id, this._basepath, options)\r\n\t\t\t\t\t.then((lib: TAnimateLibrary) => {\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tinitStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst Content = _Pixim.Content.create();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tContent.defineLibraries({\r\n\t\t\t\t\t\t\troot: class Root extends _Pixim.Container {\r\n\t\t\t\t\t\t\t\tconstructor($: any) {\r\n\t\t\t\t\t\t\t\t\tsuper();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.addChild($.vars.root);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst content = new Content();\r\n\t\t\t\t\t\tcontent.addVars({\r\n\t\t\t\t\t\t\troot: exportRoot.pixi\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn this.attachAsync(content)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\treturn lib;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\twindow.createjs.Ticker.removeEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleTick(e) {\r\n\t\t\t\tthis._stage.updateForPixi(e);\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = Pixim.animate.Player;","import { initializeAnimate } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\ninitializeAnimate();\r\n\r\nfunction playSound(id: string, loop: boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","import * as PIXI from 'pixi.js';\r\nimport { TPlayerOption } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage: any, options: TPlayerOption = {}) {\r\n\tif (!options.useSynchedTimeline) {\r\n\t\tObject.defineProperties(window.createjs.StageGL.prototype, {\r\n\t\t\tupdateForPixi: {\r\n\t\t\t\tvalue: function(e) {\r\n\t\t\t\t\tthis._tick(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}"],"names":["createPixiData","regObj","events","updateDisplayObjectChildren","self","e","const","list","children","slice","i","l","length","child","isVisible","updateForPixi","CreatejsStageGL","props","this","tickOnUpdate","tick","dispatchEvent","window","createjs","StageGL","_isDown","EventMap","mousedown","types","factory","cb","currentTarget","target","ev","data","rawX","global","x","rawY","y","rollover","rollout","pressmove","pressup","DEG_TO_RAD$1","Math","PI","appendixDescriptor","get","_originParams","set","value","_pixiData","instance","scaleX","scale","scaleY","skewX","skew","skewY","regX","regY","rotation","visible","alpha","_off","renderable","addEventListener","type","Function","func","t","push","origin","on","interactive","DisplayObject","prototype","apply","arguments","removeEventListener","j","off","splice","res","listeners","_listeners","let","removeAllEventListeners","removeAllListeners","_pixi","mask","masked","once","parent","addChild","filters","subInstance","f","ColorMatrixFilter","m","PIXI","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","Container","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","appendDisplayObjectDescriptor","cls","Object","defineProperties","PixiMovieClip","cjs","super","_createjs","prototypeAccessors","createMovieClipPixiData","pixi","assign","pivot","CreatejsMovieClip","regx","regy","initialize","addChildAt","index","removeChild","removeChildAt","removeAllChldren","prototypeAccessors$1","_updateState","MovieClip","PixiSprite","prototypeAccessors$2","Sprite","createSpritePixiData","anchor","CreatejsSprite","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","prototypeAccessors$3","PixiShape","prototypeAccessors$4","createShapePixiData","CreatejsShape","prototypeAccessors$5","graphics","_graphics","Shape","PixiGraphics","prototypeAccessors$6","Graphics","createGraphicsPixiData","strokeFill","strokeAlpha","LineCap","0","LINE_CAP","BUTT","1","ROUND","2","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","CreatejsGraphics","beginFill","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTo","x1","y1","x2","y2","radius","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","clear","_parseColor","color","charAt","parseInt","colors","replace","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","DEG_TO_RAD","prototypeAccessors$7","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","ss","s","dr","rr","dc","de","dp","PixiText","Text","PixiTextContainer","text","_text","prototypeAccessors$8","createTextOriginParam","font","textAlign","lineHeight","lineWidth","createTextPixiData","CreatejsText","_font","_parseFont","fontSize","fontFamily","fill","wordWrap","prototypeAccessors$9","_align","p","shift","style","align","height","wordWrapWidth","PixiButtonHelper","prototypeAccessors$10","createButtonHelperPixiData","Pixim","CreatejsButtonHelper","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","prototypeAccessors$11","ButtonHelper","obj","initializeAnimate","playSound","id","loop","Sound","play","interrupt","INTERRUPT_EARLY","animate","Player","rootName","basepath","pixiOptions","piximOptions","comp","AdobeAn","getComposition","Error","lib","getLibrary","root","prop","properties","backgroundColor","app","render","_id","_rootClass","_basepath","Ticker","framerate","fps","_handleTick","bind","prepareAsync","options","useSynchedTimeline","_tick","Promise","resolve","reject","manifest","loader","LoadQueue","installPlugin","evt","images","getImages","item","result","handleFileLoad","src","loadManifest","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","prepareAnimateAsync","exportRoot","_stage","Stage","stage","initStage","compositionLoaded","Content","_Pixim.Content","create","defineLibraries","$","vars","content","addVars","attachAsync","stop","_Pixim.Application"],"mappings":";;;;;;;;;;;;;;;;QAkCA,SAASA,eAAeC;QACpB,OAAO;oBACHA;YACAC,QAAQ;;;IAGhB,SAASC,4BAA4BC,MAAMC;QAEvC,KADAC,IAAMC,OAAOH,KAAKI,SAASC,SAClBC,IAAI,GAAGC,IAAIJ,KAAKK,QAAQF,IAAIC,GAAGD,KAAK;YACzCJ,IAAMO,QAAQN,KAAKG;YACdG,MAAMC,eAIXD,MAAME,cAAcV;;QAExB,QAAO;;IAGX,IAAMW;;;;;2FACLD,yBAAcE;YACTC,KAAKC,gBAAgBD,KAAKE,KAAKH,QACnCC,KAAKG,cAAc,cACnBlB,4BAA4Be;YAC5BA,KAAKG,cAAc;;MALSC,OAAOC,SAASC,UAY1CC,WAAU,GAKRC,WAAW;QAChBC,WAAW;YACVC,OAAO,EAAC;YACRC,SAAS,SAASzB,MAAM0B;gBACvB,OAAO,SAASzB;oBACfA,EAAE0B,gBAAgB1B,EAAE0B,cAAcR,UAElClB,EAAE2B,SAAS3B,EAAE2B,OAAOT;oBACpBjB,IAAM2B,KAAK5B,EAAE6B;oBACb7B,EAAE8B,OAAOF,GAAGG,OAAOC,GACnBhC,EAAEiC,OAAOL,GAAGG,OAAOG,GAEnBd,WAAU,GAEVK,GAAGzB;;;;QAuBNmC,UAAU;YACTZ,OAAO,EAAC;YACRC,SAAS,SAASzB,MAAM0B;gBACvB,OAAO,SAASzB;oBACfA,EAAE0B,gBAAgB1B,EAAE0B,cAAcR,UAElClB,EAAE2B,SAAS3B,EAAE2B,OAAOT;oBACpBjB,IAAM2B,KAAK5B,EAAE6B;oBACb7B,EAAE8B,OAAOF,GAAGG,OAAOC,GACnBhC,EAAEiC,OAAOL,GAAGG,OAAOG,GAEnBd,WAAU,GAEVK,GAAGzB;;;;QAINoC,SAAS;YACRb,OAAO,EAAC;YACRC,SAAS,SAASzB,MAAM0B;gBACvB,OAAO,SAASzB;oBACfA,EAAE0B,gBAAgB1B,EAAE0B,cAAcR,UAElClB,EAAE2B,SAAS3B,EAAE0B,cAAcR;oBAC3BjB,IAAM2B,KAAK5B,EAAE6B;oBACb7B,EAAE8B,OAAOF,GAAGG,OAAOC,GACnBhC,EAAEiC,OAAOL,GAAGG,OAAOG,GAEnBd,WAAU,GAEVK,GAAGzB;;;;QAINqC,WAAU;YACTd,OAAO,EAAC;YACRC,SAAU,SAASzB,MAAM0B;gBACxB,OAAO,SAASzB;oBACf,IAAKoB,SAAL;wBAIApB,EAAE0B,gBAAgB3B,MAElBC,EAAE2B,SAAS3B,EAAE2B,UAAU3B,EAAE2B,OAAOT;wBAChCjB,IAAM2B,KAAK5B,EAAE6B;wBACb7B,EAAE8B,OAAOF,GAAGG,OAAOC,GACnBhC,EAAEiC,OAAOL,GAAGG,OAAOG,GAEnBT,GAAGzB;;;;;QAINsC,SAAS;YACRf,OAAO,EAAC,aAAa;YACrBC,SAAS,SAASzB,MAAM0B;gBACvB,OAAO,SAASzB;oBACf,IAAKoB,SAAL;wBAIApB,EAAE0B,gBAAgB3B,MAElBqB,WAAU,GAEVpB,EAAE2B,SAAS3B,EAAE2B,UAAU3B,EAAE2B,OAAOT;wBAChCjB,IAAM2B,KAAK5B,EAAE6B;wBACb7B,EAAE8B,OAAOF,GAAGG,OAAOC,GACnBhC,EAAEiC,OAAOL,GAAGG,OAAOG,GAEnBT,GAAGzB;;;;;OASDuC,eAAeC,KAAKC,KAAK,KAKzBC,qBAAqB;QAC1BV,GAAG;YACFW,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcZ;;YAG3Ba,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAAShB,IAAIc,OACrBjC,KAAK+B,cAAcZ,IAAIc;;;QAGhCZ,GAAG;YACFS,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcV;;YAG3BW,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASd,IAAIY,OACrBjC,KAAK+B,cAAcV,IAAIY;;;QAGhCG,QAAQ;YACPN,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcK;;YAG3BJ,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASE,MAAMlB,IAAIc,OAC3BjC,KAAK+B,cAAcK,SAASH;;;QAGrCK,QAAQ;YACPR,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcO;;YAG3BN,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASE,MAAMhB,IAAIY,OAC3BjC,KAAK+B,cAAcO,SAASL;;;QAGrCM,OAAO;YACNT,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcQ;;YAG3BP,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASK,KAAKrB,KAAKc,QAAQP,cACnC1B,KAAK+B,cAAcQ,QAAQN;;;QAGpCQ,OAAO;YACNX,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcU;;YAG3BT,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASK,KAAKnB,IAAIY,QAAQP,cAClC1B,KAAK+B,cAAcU,QAAQR;;;QAIpCS,MAAM;YACLZ,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcW;;YAG3BV,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUnD,OAAOoC,IAAIc,OACnBjC,KAAK+B,cAAcW,OAAOT;;;QAGnCU,MAAM;YACLb,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcY;;YAG3BX,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUnD,OAAOsC,IAAIY,OACnBjC,KAAK+B,cAAcY,OAAOV;;;QAGnCW,UAAU;YACTd,KAAK;gBACJ,OAAO9B,KAAK+B,cAAca;;YAG3BZ,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASS,WAAWX,QAAQP,cACpC1B,KAAK+B,cAAca,WAAWX;;;QAGvCY,SAAS;YACRf,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcc;;YAG3Bb,KAAK,SAASC;gBAGb,OAFAA,UAAUA,OACVjC,KAAKkC,UAAUC,SAASU,UAAUZ,OAC3BjC,KAAK+B,cAAcc,UAAUZ;;;QAGtCa,OAAO;YACNhB,KAAK;gBACJ,OAAO9B,KAAK+B,cAAce;;YAG3Bd,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASW,QAAQb,OACzBjC,KAAK+B,cAAce,QAAQb;;;QAGpCc,MAAM;YACLjB,KAAK;gBACJ,OAAO9B,KAAK+B,cAAcgB;;YAG3Bf,KAAK,SAASC;gBAEb,OADAjC,KAAKkC,UAAUC,SAASa,cAAcf,OAC/BjC,KAAK+B,cAAcgB,OAAOd;;;QAcnCgB,kBAAkB;YACjBhB,OAAO,SAASiB,MAAMtC;gBACrB,IAAMA,cAAcuC,UAApB;oBAIA,IAAID,QAAQ1C,UAAU;wBAOrB,KANApB,IAAM2B,KAAKP,SAAS0C,OAEdE,OAAOrC,GAAGJ,QAAQX,MAAMY,KAExBF,QAAQK,GAAGL,OAERlB,IAAI,GAAGA,IAAIkB,MAAMhB,QAAQF,KAAK;4BACtCJ,IAAMiE,IAAI3C,MAAMlB;4BAEhBQ,KAAKkC,UAAUlD,OAAOqE,KAAKrD,KAAKkC,UAAUlD,OAAOqE,MAAM,IACvDrD,KAAKkC,UAAUlD,OAAOqE,GAAGC,KAAK;gCAAEF,MAAMA;gCAAMG,QAAQ3C;gCAEpDZ,KAAKkC,UAAUC,SAASqB,GAAGH,GAAGD;;wBAG/BpD,KAAKkC,UAAUC,SAASsB,eAAc;;oBAGvC,OAAOrD,OAAOC,SAASqD,cAAcC,UAAUV,iBAAiBW,MAAM5D,MAAM6D;;;;QAG9EC,qBAAqB;YACpB7B,OAAO,SAASiB,MAAMtC;gBACrB,IAAIsC,QAAQ1C;oBAKX,KAJApB,IAAM2B,KAAKP,SAAS0C,OAEdxC,QAAQK,GAAGL,OAERlB,IAAI,GAAGA,IAAIkB,MAAMhB,QAAQF,KAAK;wBACtCJ,IAAMiE,IAAI3C,MAAMlB,IAEVH,OAAOW,KAAKkC,UAAUlD,OAAOqE;wBAEnC,IAAIhE,MAAM;4BACT,KAAK,IAAI0E,IAAI1E,KAAKK,SAAS,GAAGqE,KAAK,GAAGA;gCACrC,IAAI1E,KAAK0E,GAAGR,WAAW3C,IAAI;oCAC1BZ,KAAKkC,UAAUC,SAAS6B,IAAIX,GAAGhE,KAAK0E,GAAGX,OAEvC/D,KAAK4E,OAAOF,GAAG;oCACf;;;4BAIkB,MAAhB1E,KAAKK,iBACDM,KAAKkC,UAAUlD,OAAOqE;;;;gBAMjCjE,IAAM8E,MAAM9D,OAAOC,SAASqD,cAAcC,UAAUG,oBAAoBF,MAAM5D,MAAM6D,YAE9EM,YAAYnE,KAAKoE;gBACvB,KAAKD;oBACJ,OAAOD;;gBAGR,KAAKG,IAAI7E,OAAKgB;oBACb,IAAK2D,UAAU3E,QAIX2E,UAAU3E,KAAGE,SAAS;wBACzB;;;gBAIF,OAAOwE;;;QAGTI,yBAAyB;YACxBrC,OAAO,SAASiB;gBAKf,OAJAlD,KAAKkC,UAAUC,SAASoC,mBAAmBrB,OAC3ClD,KAAKwE,MAAMrC,SAASsB,eAAc;gBAClCzD,KAAKkC,UAAUlD,SAAS,IAEjBoB,OAAOC,SAASqD,cAAcC,UAAUW,wBAAwBV,MAAM5D,MAAM6D;;;QAGrFY,MAAM;YACL3C,KAAK;gBACJ,OAAO9B,KAAK+B,cAAc0C;;YAG3BzC,KAAK,SAASC;gBAYb,OAXIA,SACHA,MAAMC,UAAUwC,OAAOpB,KAAKtD,KAAKkC,UAAUC,WAC3CnC,KAAKkC,UAAUC,SAASsC,OAAOxC,MAAMC,UAAUC;gBAE/CnC,KAAKkC,UAAUC,SAASwC,KAAK,UAAS;oBACrC3E,KAAK4E,OAAOC,SAAS5C,MAAMC,UAAUC;uBAGtCnC,KAAKkC,UAAUC,SAASsC,OAAO,MAGzBzE,KAAK+B,cAAc0C,OAAOxC;;;QAGnC6C,SAAS;YACRhD,KAAK;gBACJ,OAAO9B,KAAK+B,cAAc+C;;YAG3B9C,KAAK,SAASC;gBACb,IAAIjC,KAAKkC,UAAU6C;oBAClB,IAAI9C,OAAO;wBAGV,KAFA7C,IAAMC,OAAO,IAEJG,IAAI,GAAGA,IAAIyC,MAAMvC,QAAQF,KAAK;4BACtCJ,IAAM4F,IAAI/C,MAAMzC;4BAEhB,MAAIwF,aAAa3E,SAAS4E,oBAA1B;gCAIA7F,IAAM8F,IAAI,IAAIC,KAAKL,QAAQG;gCAC3BC,EAAEE,SAAS,EACVJ,EAAEK,eAAe,GAAG,GAAG,GAAGL,EAAEM,YAAY,KACxC,GAAGN,EAAEO,iBAAiB,GAAG,GAAGP,EAAEQ,cAAc,KAC5C,GAAG,GAAGR,EAAES,gBAAgB,GAAGT,EAAEU,aAAa,KAC1C,GAAG,GAAG,GAAGV,EAAEW,iBAAiBX,EAAEY,cAAc,KAC5C,GAAG,GAAG,GAAG,GAAG;gCAEbvG,KAAKiE,KAAK4B;;;wBAQX,KALA,IAAIW,IAAI7F,KAAKkC,UAAUC,UACnB2D,IAAID,EAAEvG,UACNyG,IAAI,IAAIZ,KAAKa,WACbC,KAAKjG,KAAKkC,UAAU6C,cAAcgB,EAAElB,SAAS,IAAIM,KAAKa,YAEnDF,EAAEpG;4BACRuG,GAAGpB,SAASiB,EAAE;;wBAGfD,EAAEhB,SAASkB,IACXF,EAAEK,mBAAmBD,IAErBA,GAAGE,mBACHF,GAAGG;wBAEHhH,IAAMiH,IAAIJ,GAAGK,kBACPnF,IAAIkF,EAAElF,GACNE,IAAIgF,EAAEhF;wBAEZ,KAAS7B,IAAI,GAAGA,IAAIyG,GAAG3G,SAASI,QAAQF;4BACvCyG,GAAG3G,SAASE,GAAG2B,KAAKA,GACpB8E,GAAG3G,SAASE,GAAG6B,KAAKA,GAEhB4E,GAAG3G,SAASE,GAAG0G,qBAClBD,GAAG3G,SAASE,GAAG0G,iBAAiBK,iBAAgB;;wBAGlDR,EAAE5E,IAAIA,GACN4E,EAAE1E,IAAIA,GAEN4E,GAAGnB,UAAUzF,MACb4G,GAAGM,iBAAgB;2BACb;wBACNnH,IAAMyG,MAAI7F,KAAKkC,UAAUC;wBAEzB,IAAI0D,IAAEK,kBAAkB;4BACvB9G,IAAM6G,OAAKjG,KAAKkC,UAAU6C,aACpBgB,MAAIE,KAAGrB,QACPkB,MAAIG,KAAG3G;4BAIb,KAFAuG,IAAEW,kBACFX,IAAEK,mBAAmB,MACdJ,IAAEpG,UAAQ;gCAChBN,IAAMqH,IAAIZ,IAAEhB,SAASiB,IAAE;gCACvBW,EAAEtF,KAAK4E,IAAE5E,GACTsF,EAAEpF,KAAK0E,IAAE1E;;4BAGV4E,KAAGnB,UAAU,MACbmB,KAAGM,iBAAgB,GAEnBvG,KAAKkC,UAAU6C,cAAcc;;;;gBAKhC,OAAO7F,KAAK+B,cAAc+C,UAAU7C;;;;IAQvC,SAASyE,8BAA8BC;QACtCC,OAAOC,iBAAiBF,IAAIhD,WAAW9B;;IAMxC,IAAMiF;QACL,uBAAYC;YACXC,sBAEAhH,KAAKiH,YAAYF;;;;;;;;;eAGlBG,mBAAI7G;YACH,OAAOL,KAAKiH;;MARcjB;IAe5B,SAASmB,wBAAwBJ;QAChC3H,IAAMgI,OAAO,IAAIN,cAAcC;QAE/B,OAAOH,OAAOS,OAAOvI,eAAesI,KAAKE,QAAQ;YAChDnF,UAAUiF;YACVrC,aAAaqC;;;IAOf,IAAMG;QACL;YACCvH,KAAK+B,gBAjiBI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eAohBf9E,KAAKkC,YAAYiF,wBAAwBnH,OAEzCgH,uBAASnD;;;;;;;;;2CAGV6D;YAIC,OAHA1H,KAAK+B,gBAxiBI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eA2hBf9E,KAAKkC,YAAYiF,wBAAwBnH,OAElCgH,qBAAMU,uBAAc7D;uCAG5BgB,oBAASlF;YAGR,OAFAK,KAAKkC,UAAU6C,YAAYF,SAASlF,MAAMuC,UAAUC,WAE7C6E,qBAAMnC,oBAASlF;uCAGvBgI,sBAAWhI,OAAOiI;YAGjB,OAFA5H,KAAKkC,UAAU6C,YAAY4C,WAAWhI,MAAMuC,UAAUC,UAAUyF,QAEzDZ,qBAAMW,sBAAWhI,OAAOiI;uCAGhCC,uBAAYlI;YAGX,OAFAK,KAAKkC,UAAU6C,YAAY8C,YAAYlI,MAAMuC,UAAUC,WAEhD6E,qBAAMa,uBAAYlI;uCAG1BmI,yBAAcF;YAGb,OAFA5H,KAAKkC,UAAU6C,YAAY+C,cAAcF,QAElCZ,qBAAMc,yBAAcF;uCAG5BG;YAGC,OAFA/H,KAAKkC,UAAU6C,YAAYyB,kBAEpBQ,qBAAMe;WAGdC,qBAAIZ;YACH,OAAOpH,KAAKkC,UAAUC;uCAGvBtC,yBAAcV;YAGb,OAFAa,KAAKiI,gBAEEhJ,4BAA4Be,MAAMb;;MApDXiB,OAAOC,SAAS6H;IAwDhDxB,8BAA8Ba;IAK9B,IAAMY;QACL,oBAAYpB;YACXC,mBAEAhH,KAAKiH,YAAYF;;;;;;;;;eAGlBqB,qBAAI/H;YACH,OAAOL,KAAKiH;;MARWoB;IAezB,SAASC,qBAAqBvB;QAC7B3H,IAAMgI,OAAO,IAAIe,WAAWpB;QAE5B,OAAOH,OAAOS,OAAOvI,eAAesI,KAAKmB,SAAS;YACjDpG,UAAUiF;;;IAOZ,IAAMoB;QACL;YACCxI,KAAK+B,gBAxnBI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eA2mBf9E,KAAKkC,YAAYoG,qBAAqBtI,OAEtCgH,uBAASnD;;;;;;;;;wCAGV6D;YAIC,OAHA1H,KAAK+B,gBA/nBI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eAknBf9E,KAAKkC,YAAYoG,qBAAqBtI,OAE/BgH,qBAAMU,uBAAc7D;oCAG5B4E;YACCzB,qBAAMyB,wBAAe5E;YAErBzE,IAAMsJ,QAAQ1I,KAAK2I,YAAYC,SAAS5I,KAAK6I,eACvCC,cAAcC,oBAAYC,KAAKN,MAAMO,QACrCC,UAAU,IAAIC,gBAAQL,aAAaJ,MAAMU;YAE/CpJ,KAAKkC,UAAUC,SAAS+G,UAAUA;WAGnCG,qBAAIjC;YACH,OAAOpH,KAAKkC,UAAUC;oCAGvBtC;YACC,QAAO;;MA9BoBO,OAAOC,SAASgI;IAkC7C3B,8BAA8B8B;IAK9B,IAAMc;QACL,mBAAYvC;YACXC,sBAEAhH,KAAKiH,YAAYF;;;;;;;;;eAGlBwC,qBAAIlJ;YACH,OAAOL,KAAKiH;;MARUjB;IAexB,SAASwD,oBAAoBzC;QAC5B3H,IAAMgI,OAAO,IAAIkC,UAAUvC;QAE3B,OAAOH,OAAOS,OAAOvI,eAAesI,KAAKE,QAAQ;YAChDnF,UAAUiF;YACV1C,QAAQ;;;IAOV,IAAM+E;QACL;YACCzJ,KAAK+B,gBA1rBI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eA6qBf9E,KAAKkC,YAAYsH,oBAAoBxJ,OAErCgH,uBAASnD;;;;;;;;;;;;eAGV6F,qBAAIC;YACH,OAAO3J,KAAK4J;WAGbF,qBAAIC,wBAAS1H;YACZ,IAAIjC,KAAKkC,UAAUwC,OAAOhF;gBAGzB,IAFAM,KAAKkC,UAAUC,SAASqE,kBAEpBvE;oBACH,KAAKoC,IAAI7E,IAAI,GAAGA,IAAIQ,KAAKkC,UAAUwC,OAAOhF,QAAQF;wBACjDQ,KAAKkC,UAAUwC,OAAOlF,GAAGiF,OAAOzE,KAAKkC,UAAUC;;;oBAGhD,KAAKkC,IAAI7E,MAAI,GAAGA,MAAIQ,KAAKkC,UAAUwC,OAAOhF,QAAQF;wBACjDQ,KAAKkC,UAAUwC,OAAOlF,KAAGiF,OAAO;;;;YAK/BxC,SACHjC,KAAKkC,UAAUC,SAAS0C,SAAS5C,MAAMC,UAAUC,WAGlDnC,KAAK4J,YAAY3H;WAGlByH,qBAAItC;YACH,OAAOpH,KAAKkC,UAAUC;mCAGvBtC;YACC,QAAO;;MAvCmBO,OAAOC,SAASwJ;IA2C5CnD,8BAA8B+C;IAK9B,IAAMK;QACL,sBAAY/C;YACXC,qBAEAhH,KAAKiH,YAAYF;;;;;;;;;eAGlBgD,qBAAI1J;YACH,OAAOL,KAAKiH;;MARa+C;IAe3B,SAASC,uBAAuBlD;QAC/B3H,IAAMgI,OAAO,IAAI0C,aAAa/C;QAE9B,OAAOH,OAAOS,OAAOvI,eAAesI,KAAKE,QAAQ;YAChDnF,UAAUiF;YACV8C,YAAY;YACZC,aAAa;;;IAOf/K,IAUMgL,UAAU;QACfC,GAAGC,iBAASC;QACZC,GAAGF,iBAASG;QACZC,GAAGJ,iBAASK;OAMPC,WAAW;QAChBP,GAAGQ,kBAAUC;QACbN,GAAGK,kBAAUJ;QACbC,GAAGG,kBAAUE;OAMRC;QACL;YACChL,KAAK+B,gBAlyBI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eAqxBf9E,KAAKkC,YAAY+H,uBAAuBjK,OAExCgH,uBAASnD;YAET7D,KAAKkC,UAAUC,SAAS8I,UAAU,UAAU,IAC5CjL,KAAKkC,UAAUgI,aAAa,GAC5BlK,KAAKkC,UAAUiI,cAAc;;;;;;;;;0CAG9Be,kBAAO/J,GAAGE;YAST,OARIrB,KAAKkC,UAAUC,SAASgJ,QAAQC,UAAUC,cAAc;gBAAClK,GAAGA;gBAAGE,GAAGA;iBACrErB,KAAKkC,UAAUC,SAASmJ,cAExBtL,KAAKkC,UAAUC,SAASoJ,WAGzBvL,KAAKkC,UAAUC,SAAS+I,OAAO/J,GAAGE;YAE3B2F,qBAAMkE,kBAAO/J,GAAGE;sCAGxBmK,kBAAOrK,GAAGE;YAGT,OAFArB,KAAKkC,UAAUC,SAASqJ,OAAOrK,GAAGE,IAE3B2F,qBAAMwE,kBAAOrK,GAAGE;sCAGxBoK,iBAAMC,IAAIC,IAAIC,IAAIC,IAAIC;YAGrB,OAFA9L,KAAKkC,UAAUC,SAASsJ,MAAMC,IAAIC,IAAIC,IAAIC,IAAIC,SAEvC9E,qBAAMyE,iBAAMC,IAAIC,IAAIC,IAAIC,IAAIC;sCAGpCC,eAAI5K,GAAGE,GAAGyK,QAAQE,YAAYC,UAAUC;YAGvC,OAFAlM,KAAKkC,UAAUC,SAAS4J,IAAI5K,GAAGE,GAAGyK,QAAQE,YAAYC,UAAUC;YAEzDlF,qBAAM+E,eAAI5K,GAAGE,GAAGyK,QAAQE,YAAYC,UAAUC;sCAGtDC,4BAAiBC,KAAKC,KAAKlL,GAAGE;YAG7B,OAFArB,KAAKkC,UAAUC,SAASgK,iBAAiBC,KAAKC,KAAKlL,GAAGE,IAE/C2F,qBAAMmF,4BAAiBC,KAAKC,KAAKlL,GAAGE;sCAG5CiL,yBAAcC,MAAMC,MAAMC,MAAMC,MAAMvL,GAAGE;YAGxC,OAFArB,KAAKkC,UAAUC,SAASmK,cAAcC,MAAMC,MAAMC,MAAMC,MAAMvL,GAAGE,IAE1D2F,qBAAMsF,yBAAcC,MAAMC,MAAMC,MAAMC,MAAMvL,GAAGE;sCAGvD+H,gBAAKjI,GAAGE,GAAGsL,GAAGC;YAGb,OAFA5M,KAAKkC,UAAUC,SAAS0K,SAAS1L,GAAGE,GAAGsL,GAAGC,IAEnC5F,qBAAMoC,gBAAKjI,GAAGE,GAAGsL,GAAGC;sCAG5BE;YAGC,OAFA9M,KAAKkC,UAAUC,SAAS2K,aAEjB9F,qBAAM8F;sCAGdC;YAGC,OAFA/M,KAAKkC,UAAUC,SAAS4K,SAEjB/F,qBAAM+F;sCAGdC,uBAAYC;YACX7N,IAAM8E,MAAM;gBACX+I,OAAO;gBACPnK,OAAO;;YAGR,KAAKmK;gBAEJ,OADA/I,IAAIpB,QAAQ,GACLoB;;YAGR,IAAwB,QAApB+I,MAAMC,OAAO;gBAEhB,OADAhJ,IAAI+I,QAAQE,SAASF,MAAM1N,MAAM,IAAI,KAC9B2E;;YAGR9E,IAAMgO,SAASH,MAAMI,QAAQ,kBAAkB,IAAIC,MAAM;YAKzD,OAHApJ,IAAI+I,QAtHY,QAsHJM,OAAOH,OAAO,MAjHR,MAiH0BG,OAAOH,OAAO,MAAoBG,OAAOH,OAAO;YAC5FlJ,IAAIpB,QAAQyK,OAAOH,OAAO,KAEnBlJ;sCAGR+G,qBAAUgC;YACT7N,IAAM0G,IAAI9F,KAAKgN,YAAYC;YAG3B,OAFAjN,KAAKkC,UAAUC,SAAS8I,UAAUnF,EAAEmH,OAAOnH,EAAEhD,QAEtCkE,qBAAMiE,qBAAUgC;sCAGxB7B;YAGC,OAFApL,KAAKkC,UAAUC,SAASiJ,WAEjBpE,qBAAMoE;sCAGdoC,0BAAeC,WAAWC,MAAMC,QAAQC,YAAYC;YAUnD,OATA7N,KAAKkC,UAAUC,SAAS2L,iBAAiB;gBACxCC,OAAON;gBACPR,OAAOjN,KAAKkC,UAAUgI;gBACtBpH,OAAO9C,KAAKkC,UAAUiI;gBACtB6D,KAAMN,QAAQtD,UAAWA,QAAQsD,QAAQtD,QAAQ;gBACjD6D,MAAON,UAAU/C,WAAYA,SAAS+C,UAAU/C,SAAS;gBACzDgD,YAAYA;gBAGN5G,qBAAMwG,0BAAeC,WAAWC,MAAMC,QAAQC,YAAYC;sCAGlEK,uBAAYjB;YACX7N,IAAM0G,IAAI9F,KAAKgN,YAAYC;YAI3B,OAHAjN,KAAKkC,UAAUgI,aAAapE,EAAEmH,OAC9BjN,KAAKkC,UAAUiI,cAAcrE,EAAEhD;YAExBkE,qBAAMkH,uBAAYjB;sCAG1BkB,yBAAchN,GAAGE,GAAGsL,GAAGC,GAAGd;YAGzB,OAFA9L,KAAKkC,UAAUC,SAASiM,gBAAgBjN,GAAGE,GAAGsL,GAAGC,GAAGd,SAE7C9E,qBAAMmH,yBAAchN,GAAGE,GAAGsL,GAAGC,GAAGd;sCAGxCuC,sBAAWlN,GAAGE,GAAGyK;YAGhB,OAFA9L,KAAKkC,UAAUC,SAASkM,WAAWlN,GAAGE,GAAGyK,SAElC9E,qBAAMqH,sBAAWlN,GAAGE,GAAGyK;sCAG/BwC,uBAAYnN,GAAGE,GAAGsL,GAAGC;YAGpB,OAFA5M,KAAKkC,UAAUC,SAASmM,YAAYnN,GAAGE,GAAGsL,GAAGC,IAEtC5F,qBAAMsH,uBAAYnN,GAAGE,GAAGsL,GAAGC;sCAGnC2B,wBAAapN,GAAGE,GAAGyK,QAAQ0C,OAAOC,WAAWC;YAG5C,OAFA1O,KAAKkC,UAAUC,SAASwM,mBAAmBxN,GAAGE,GAAGyK,QAAQ0C,OAAOE,QAAQE;YAEjE5H,qBAAMuH,wBAAapN,GAAGE,GAAGyK,QAAQ0C,OAAOC,WAAWC;WAG3DG,qBAAIzH;YACH,OAAOpH,KAAKkC,UAAUC;sCAGvBtC;YACC,QAAO;;MA/JsBO,OAAOC,SAAS2J;IAmK/CtD,8BAA8BsE,mBAE9BpE,OAAOC,iBAAiBmE,iBAAiBrH,WAAW;QACnDmL,SAAS;YACR7M,OAAO+I,iBAAiBrH,UAAUwI;;QAGnCU,UAAU;YACT5K,OAAO+I,iBAAiBrH,UAAUyF;;QAGnC2F,IAAI;YACH9M,OAAO+I,iBAAiBrH,UAAUuH;;QAGnC8D,IAAI;YACH/M,OAAO+I,iBAAiBrH,UAAU6H;;QAGnCyD,IAAI;YACHhN,OAAO+I,iBAAiBrH,UAAU8H;;QAGnCyD,IAAI;YACHjN,OAAO+I,iBAAiBrH,UAAU2I;;QAGnC6C,IAAI;YACHlN,OAAO+I,iBAAiBrH,UAAUwI;;QAGnCiD,GAAG;YACFnN,OAAO+I,iBAAiBrH,UAAUoI;;QAGnCsD,GAAG;YACFpN,OAAO+I,iBAAiBrH,UAAUyF;;QAGnCkG,IAAI;YACHrN,OAAO+I,iBAAiBrH,UAAUmJ;;QAGnChH,GAAG;YACF7D,OAAO+I,iBAAiBrH,UAAUoJ;;QAGnC/H,GAAG;YACF/C,OAAO+I,iBAAiBrH,UAAUsH;;QAGnCsE,IAAI;YACHtN,OAAO+I,iBAAiBrH,UAAUyH;;QAGnCoE,IAAI;YACHvN,OAAO+I,iBAAiBrH,UAAU6J;;QAGnCiC,GAAG;YACFxN,OAAO+I,iBAAiBrH,UAAUuK;;QAGnCwB,IAAI;YACHzN,OAAO+I,iBAAiBrH,UAAUkJ;;QAGnC8C,IAAI;YACH1N,OAAO+I,iBAAiBrH,UAAUwK;;QAGnCyB,IAAI;YACH3N,OAAO+I,iBAAiBrH,UAAU0K;;QAGnCwB,IAAI;YACH5N,OAAO+I,iBAAiBrH,UAAU2K;;QAGnCwB,IAAI;YACH7N,OAAO+I,iBAAiBrH,UAAU4K;;;IAOpC,IAAMwB;;;;;;MAAiBC,eAMjBC;QACL,2BAAYlJ,KAAKmJ;YAChBlJ,sBAEAhH,KAAKiH,YAAYF,KACjB/G,KAAKmQ,QAAQD;;;;;;;;;;;;eAGdE,qBAAI/P;YACH,OAAOL,KAAKiH;WAGbmJ,qBAAIF;YACH,OAAOlQ,KAAKmQ;;MAbkBnK;IAoBhC,SAASqK,sBAAsBH,MAAMI,MAAMrD;QAC1C,OAAOrG,OAAOS,OArjCJ;YACHlG,GAAG;YACHE,GAAG;YACHe,QAAQ;YACRE,QAAQ;YACRkF,MAAM;YACNC,MAAM;YACNlF,OAAO;YACPE,OAAO;YACPG,UAAU;YACVC,UAAS;YACTC,OAAO;YACPC,OAAM;YACN0B,MAAM;YACNK,SAAS;WAuiC2B;YAC1CoL,MAAMA;YACNI,MAAMA;YACNrD,OAAOA;YACPsD,WAAW;YACXC,YAAY;YACZC,WAAW;;;IAOb,SAASC,mBAAmB3J,KAAKmJ;QAChC9Q,IAAMgI,OAAO,IAAI6I,kBAAkBlJ,KAAKmJ;QAExC,OAAOtJ,OAAOS,OAAOvI,eAAesI,KAAKE,QAAQ;YAChDnF,UAAUiF;;;IAOZ,IAAMuJ;QACL,sBAAYT,MAAMI,MAAMrD;YACvBjN,KAAK+B,gBAAgBsO,sBAAsBH,MAAMI,MAAMrD;YAEvD7N,IAAMwR,QAAQ5Q,KAAK6Q,WAAWP,OAExBjN,IAAI,IAAI0M,SAASG,MAAM;gBAC5BY,UAAUF,MAAME;gBAChBC,YAAYH,MAAMG;gBAClBC,MAAMhR,KAAKgN,YAAYC;gBACvBgE,WAAU;;YAGXjR,KAAKkC,YAAYwO,mBAAmB1Q,MAAMqD,IAC1CrD,KAAKkC,UAAUC,SAAS0C,SAASxB;YAEjC2D,uBAASnD;;;;;;;;;;;;;;;;;;;;;;;;;;;eAGVqN,qBAAIhB;YACH,OAAOlQ,KAAK+B,cAAcmO;WAG3BgB,qBAAIhB,oBAAKA;YACRlQ,KAAKkC,UAAUC,SAAS+N,KAAKA,OAAOA,MACpClQ,KAAKmR,OAAOnR,KAAKuQ,YAEjBvQ,KAAK+B,cAAcmO,OAAOA;kCAG3BW,sBAAWP;YACVlR,IAAMgS,IAAId,KAAKhD,MAAM;YAErB,OAAO;gBACNwD,UAAUvD,QAAQ6D,EAAEC,WAAW,OAAOhE,QAAQ,MAAM;gBACpD0D,YAAYK,EAAEnD,KAAK,KAAKZ,QAAQ,MAAM;;WAIxC6D,qBAAIZ;YACH,OAAOtQ,KAAK+B,cAAcuO;WAG3BY,qBAAIZ,oBAAKA;YACRlR,IAAMwR,QAAQ5Q,KAAK6Q,WAAWP;YAC9BtQ,KAAKkC,UAAUC,SAAS+N,KAAKoB,MAAMR,WAAWF,MAAME,UACpD9Q,KAAKkC,UAAUC,SAAS+N,KAAKoB,MAAMP,aAAaH,MAAMG;YAEtD/Q,KAAK+B,cAAcuO,OAAOA;kCAG3BtD,uBAAYC;YACX,OAAOE,SAASF,MAAM1N,MAAM,IAAI;WAGjC2R,qBAAIjE;YACH,OAAOjN,KAAK+B,cAAckL;WAG3BiE,qBAAIjE,qBAAMA;YACTjN,KAAKkC,UAAUC,SAAS+N,KAAKoB,MAAMN,OAAOhR,KAAKgN,YAAYC,QAE3DjN,KAAK+B,cAAckL,QAAQA;kCAG5BkE,kBAAOI;YACQ,WAAVA,QAKU,aAAVA,QAKU,YAAVA,UACHvR,KAAKkC,UAAUC,SAAS+N,KAAK/O,KAAMnB,KAAKyQ,aALxCzQ,KAAKkC,UAAUC,SAAS+N,KAAK/O,KAAKnB,KAAKyQ,YAAY,IALnDzQ,KAAKkC,UAAUC,SAAS+N,KAAK/O,IAAI;WAenC+P,qBAAIX;YACH,OAAOvQ,KAAK+B,cAAcwO;WAG3BW,qBAAIX,yBAAUgB;YACbvR,KAAKkC,UAAUC,SAAS+N,KAAKoB,MAAMC,QAAQA,OAC3CvR,KAAKmR,OAAOI,QAEZvR,KAAK+B,cAAcwO,YAAYgB;WAGhCL,qBAAIV;YACH,OAAOxQ,KAAK+B,cAAcyO;WAG3BU,qBAAIV,0BAAWgB;YACdxR,KAAKkC,UAAUC,SAAS+N,KAAKoB,MAAMd,aAAagB,QAEhDxR,KAAK+B,cAAcyO,aAAagB;WAGjCN,qBAAIT;YACH,OAAOzQ,KAAK+B,cAAc0O;WAG3BS,qBAAIT,yBAAU1C;YACb/N,KAAKkC,UAAUC,SAAS+N,KAAKoB,MAAMG,gBAAgB1D,OAEnD/N,KAAK+B,cAAc0O,YAAY1C;WAGhCmD,qBAAI9J;YACH,OAAOpH,KAAKkC,UAAUC;kCAGvBtC;YACC,QAAO;;MAtHkBO,OAAOC,SAAS2P;IA0H3CtJ,8BAA8BiK;IAK9B,IAAMe;QACL,0BAAY3K;YACXC,sBAEAhH,KAAKiH,YAAYF;;;;;;;;;eAGlB4K,sBAAItR;YACH,OAAOL,KAAKiH;;MARiBjB;IAe/B,SAAS4L,2BAA2B7K;QACnC3H,IAAMgI,OAAO,IAAIsK,iBAAiB3K;QAElC,OAAOH,OAAOS,OAAOvI,eAAesI,KAAKE,QAAQ;YAChDnF,UAAUiF;;;IAOZ,IC3uCUyK,OD2uCJC;QACL;YACC9R,KAAK+B,gBAxuCI;gBACHZ,GAAG;gBACHE,GAAG;gBACHe,QAAQ;gBACRE,QAAQ;gBACRkF,MAAM;gBACNC,MAAM;gBACNlF,OAAO;gBACPE,OAAO;gBACPG,UAAU;gBACVC,UAAS;gBACTC,OAAO;gBACPC,OAAM;gBACN0B,MAAM;gBACNK,SAAS;eA2tCf9E,KAAKkC,YAAY0P,2BAA2B5R,OAE5CgH,uBAASnD;YAETzE,IAAMiB,WAAWwD,UAAU,IACrBuD,OAAO/G,SAAS6B,UAAUC,UAE1B4P,YAAYlO,UAAU,IACtBmO,YAAYnO,UAAU,IACtBoO,YAAYpO,UAAU,IACtBqO,MAAMrO,UAAU,IAChBsO,WAAWtO,UAAU;YAE3BqO,IAAIzJ,YAAY0J;YAChB/S,IAAMgT,UAAUhL,KAAKvC,SAASqN,IAAIhQ,UAAUC;YAC5CiQ,QAAQtP,QAAQ;YAEhBuB,IAAIgO,UAAS,GACTC,UAAS;YAEbF,QAAQ5O,GAAG,gBAAe;gBACzB6O,UAAS,GACLC,SACHjS,SAASoI,YAAYwJ,aAErB5R,SAASoI,YAAYuJ;iBAIvBI,QAAQ5O,GAAG,eAAc;gBACxB6O,UAAS,GAELC,SACHjS,SAASoI,YAAYuJ,aAErB3R,SAASoI,YAAYsJ;iBAIvBK,QAAQ5O,GAAG,gBAAe;gBACzB8O,UAAS,GACTjS,SAASoI,YAAYwJ;iBAGtBG,QAAQ5O,GAAG,cAAa;gBACvB8O,UAAS,GACLD,SACHhS,SAASoI,YAAYuJ,aAErB3R,SAASoI,YAAYsJ;iBAIvBK,QAAQ5O,GAAG,qBAAoB;gBAC9B8O,UAAS,GACLD,SACHhS,SAASoI,YAAYuJ,aAErB3R,SAASoI,YAAYsJ;iBAIvBK,QAAQ3O,eAAc,GACtB2O,QAAQG,SAAS;;;;;;;;;eAGlBC,sBAAIpL;YACH,OAAOpH,KAAKkC,UAAUC;;;MAtEW/B,OAAOC,SAASoS;IA0EnD/L,8BAA8BoL,uBA0D9B,SAA2BY;QASvB,KAAKrO,IAAI7E,8BAToB,KAC7BY,OAAOC,SAASC,UAAUR;QAC1BM,OAAOC,SAAS6H,YAAYX,mBAC5BnH,OAAOC,SAASgI,SAASG;QACzBpI,OAAOC,SAASwJ,QAAQJ,eAExBrJ,OAAOC,SAAS2J,WAAWgB;QAC3B5K,OAAOC,SAAS2P,OAAOW,cACvBvQ,OAAOC,SAASoS,eAAeX;QACjBY;YACVtS,OAAOC,SAASb,KAAKkT,IAAIlT;;KE33CjCmT,IASA/L,OAAOC,iBAAiBzG,QAAQ;QAC/BwS,WAAW;YACV3Q,OATF,SAAmB4Q,IAAYC;gBAC9B,mCAD8C,IACvC1S,OAAOC,SAAS0S,MAAMC,KAAKH,IAAI;oBACrCI,WAAW7S,OAAOC,SAAS0S,MAAMG;oBACjCJ,MAAMA;;;;QDHR,SAAUjB;SACT,SAAiBsB;YAIhB,IAAaC;gBAaZ,gBAAYP,IAAYQ,UAAkBC,UAAkBC,aAA0BC;6DAAJ,gDAA8C;oBAC/HpU,IAAMqU,OAAOrT,OAAOsT,QAAQC,eAAed;oBAC3C,KAAKY;wBACJ,MAAM,IAAIG,MAAM;;oBAGjBxU,IAAMyU,MAAuBJ,KAAKK,cAC5BC,OAAOF,IAAIR;oBACjB,KAAKU;wBACJ,MAAM,IAAIH,MAAM;;oBAGjBxU,IAAM4U,OAAOH,IAAII;oBAEjBjN,sBAAMJ,OAAOS,OAAOkM,aAAa;wBAChCxF,OAAOiG,KAAKjG;wBACZyD,QAAQwC,KAAKxC;wBACb0C,iBAAiB/G,SAAS6G,KAAK/G,MAAM1N,MAAM,IAAI;wBAC5CiU,eAEJxT,KAAKmU,IAAIC,UAETpU,KAAKqU,MAAMxB,IACX7S,KAAKsU,aAAaP,MAClB/T,KAAKuU,YAAYjB;oBAEjBlT,OAAOC,SAASmU,OAAOC,YAAYT,KAAKU,KAExC1U,KAAK2U,cAAc3U,KAAK2U,YAAYC,KAAK5U;;;wEAO1C6U,wBAAaC;;oBACZ,wCADqC,KDuwCzC,SAA6BjC,IAAIS,UAAUwB;yDAAU;wBACjD1V,IAAMqU,OAAOrT,OAAOsT,QAAQC,eAAed;wBAC3C,KAAKY;4BACD,MAAM,IAAIG,MAAM;;wBAEpBxU,IAAMyU,MAAMJ,KAAKK;wBAUjB,OATKgB,QAAQC,sBACTnO,OAAOC,iBAAiBzG,OAAOC,SAAS6H,UAAUvE,WAAW;4BACzD9D,eAAe;gCACXoC,OAAO,SAAU9C;oCACb,OAAOa,KAAKgV,MAAM7V;;;4BAK3B,IAAI8V,kBAASC,SAASC;4BACc,MAAnCtB,IAAII,WAAWmB,SAAS1V,UACxBwV,QAAQ;4BAEZ9V,IAAMiW,SAAS,IAAIjV,OAAOC,SAASiV,WAAU;4BAQ7C,IAPAD,OAAOE,cAAcnV,OAAOC,SAAS0S,QACrCsC,OAAOpS,iBAAiB,aAAY,SAAUuS;iCA8CtD,SAAwBA,KAAK/B;oCACzBrU,IAAMqW,SAAShC,KAAKiC;oCAChBF,OAAyB,WAAjBA,IAAIG,KAAKzS,SACjBuS,OAAOD,IAAIG,KAAK9C,MAAM2C,IAAII;iCAhDtBC,CAAeL,KAAK/B;iCAExB4B,OAAOpS,iBAAiB,aAAY,SAAUuS;gCAC1CN,QAAQM;iCAERlC,UAAU;gCACVA,YAAYA,WAAW,KAAKjG,QAAQ,eAAe;gCAEnD,KADAjO,IAAM8F,IAAI2O,IAAII,WAAWmB,UAChB5V,IAAI,GAAGA,IAAI0F,EAAExF,QAAQF;oCAC1B0F,EAAE1F,GAAGsW,MAAMxC,WAAWpO,EAAE1F,GAAGsW;;;4BAGnCT,OAAOU,aAAalC,IAAII,WAAWmB;4BAElCY,eAAMR;4BAIP,KAHApW,IAAMoQ,KAAKiE,KAAKwC,kBACVC,QAAQV,IAAI1U,QACZqV,aAAatC,IAAIsC,YACd3W,IAAI,GAAGA,IAAI2W,WAAWzW,QAAQF;gCACnCgQ,GAAG2G,WAAW3W,GAAG4W,QAAQ,IAAIhW,OAAOC,SAASgW,YAAY;oCACrDZ,QAAQ,EACJS,MAAMI,UAAUH,WAAW3W,GAAG4W;oCAElCG,QAAQJ,WAAW3W,GAAG+W;;;4BAG9B,OAAO1C;;qBCtzCJ2C,CAAoBxW,KAAKqU,KAAKrU,KAAKuU,WAAWO,SACnDkB,eAAMnC;wBACNzU,IAAMqX,aAAa,IAAIzW,OAAKsU;wBAE5BtU,OAAK0W,SAAS,IAAI7C,IAAI8C,gBExDFC,OAAY9B;6DAAyB,KACzDA,QAAQC,sBACZnO,OAAOC,iBAAiBzG,OAAOC,SAASC,QAAQqD,WAAW;gCAC1D9D,eAAe;oCACdoC,OAAO,SAAS9C;wCACfa,KAAKgV,MAAM7V;;;;yBFoDV0X,CAAU7W,OAAK0W,QAAQ5B,UAEvBlO,OAAOC,iBAAiBzG,QAAQ;4BAC/BqW,YAAY;gCACXxU,OAAOwU;;4BAGRG,OAAO;gCACN3U,OAAOjC,OAAK0W;;4BAIdtW,OAAOsT,QAAQoD,kBAAkBjD,IAAII,WAAWpB;wBAEhDzT,IAAM2X,UAAUC,eAAeC;wBAE/BF,QAAQG,gBAAgB;4BACvBnD;gCACC,cAAYoD;oCACXnQ,uBAEAhH,KAAK6E,SAASsS,EAAEC,KAAKrD;;;;;;wBAKxB3U,IAAMiY,UAAU,IAAIN;wBAOpB,OANAM,QAAQC,QAAQ;4BACfvD,MAAM0C,WAAWrP;4BAGlBpH,OAAK0W,OAAO7R,SAAS4R,aAEdzW,OAAKuX,YAAYF,SACtBrB;4BACA,OAAOnC;;;oCAKZb;oBAGC,OAFA5S,OAAOC,SAASmU,OAAOvR,iBAAiB,QAAQjD,KAAK2U,cAE9C3U;oCAGRwX;oBAGC,OAFApX,OAAOC,SAASmU,OAAO1Q,oBAAoB,QAAQ9D,KAAK2U,cAEjD3U;oCAGA2U,uBAAYxV;oBACnBa,KAAK0W,OAAO7W,cAAcV,IAC1Ba,KAAKmU,IAAIC;;cA5GiBqD;YAAftE;SAJd,CAAiBtB,kBAAAA;KADlB,CAAUA,UAAAA;QA0HIuB,SAASvB,MAAMsB,QAAQC;;"}